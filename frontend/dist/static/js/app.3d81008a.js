(function(){"use strict";var e={2599:function(e,t,s){s.d(t,{l:function(){return Xm},Z:function(){return Qm}});var a=s(9242),i=s(3396);const o=(0,i._)("div",{class:"page-alert",style:{display:"none",width:"fit-content","justify-content":"center"},type:"Error",id:"page-alert",onclick:"ClearAlertMessage(this)"},[(0,i._)("div",{class:"alert",id:"alert"},[(0,i._)("div",{class:"alert-message",name:"alert",id:"alert-message"},[(0,i._)("h3",{class:"alert-text",name:"alert-text",id:"alert-text"})])]),(0,i._)("div",{class:"page-alert-close","data-closable":""},[(0,i._)("svg",{width:"20px",height:"20px",viewBox:"0 0 24 24"},[(0,i._)("path",{d:"M13.41 12l4.3-4.29a1 1 0 1 0-1.42-1.42L12 10.59l-4.29-4.3a1 1 0 0 0-1.42 1.42l4.3 4.29-4.3 4.29a1 1 0 0 0 0 1.42 1 1 0 0 0 1.42 0l4.29-4.3 4.29 4.3a1 1 0 0 0 1.42 0 1 1 0 0 0 0-1.42z"})])])],-1);function l(e,t,s,a,l,n){const r=(0,i.up)("auth-base"),c=(0,i.up)("un-auth-base");return(0,i.wg)(),(0,i.iD)("div",null,[e.authenticated?((0,i.wg)(),(0,i.j4)(r,{key:0})):((0,i.wg)(),(0,i.j4)(c,{key:1})),o])}const n={id:"content-page",class:"content-page"},r={class:"container"},c={class:"row justify-content-center"};function d(e,t,s,a,o,l){const d=(0,i.up)("side-bar"),u=(0,i.up)("top-bar"),p=(0,i.up)("router-view");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(d),(0,i.Wm)(u),(0,i._)("div",n,[(0,i._)("div",r,[(0,i._)("div",c,[(0,i.Wm)(p)])])])],64)}const u={class:"iq-top-navbar"},p={class:"iq-navbar-custom"},m={class:"navbar navbar-expand-lg navbar-light p-0"},g={class:"iq-navbar-logo d-flex justify-content-between"},h=(0,i._)("a",null,[(0,i._)("span",null,"Social Network")],-1),v=(0,i._)("div",{class:"iq-menu-bt align-self-center"},[(0,i._)("div",{class:"wrapper-menu"},[(0,i._)("div",{class:"main-circle"},[(0,i._)("i",{class:"ri-menu-line"})])])],-1),f=(0,i._)("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-label":"Toggle navigation"},[(0,i._)("i",{class:"ri-menu-3-line"})],-1),w={class:"collapse navbar-collapse",id:"navbarSupportedContent"},b={class:"navbar-nav ms-auto navbar-list gap-1"},_=(0,i._)("a",{to:"/",class:"d-flex align-items-center"},[(0,i._)("i",{class:"ri-home-line"})],-1),y={class:"nav-item dropdown"},k={class:"nav-item dropdown"};function D(e,t,s,a,o,l){const n=(0,i.up)("router-link"),r=(0,i.up)("nav-drop-down"),c=(0,i.up)("account-drop-down");return(0,i.wg)(),(0,i.iD)("div",u,[(0,i._)("div",p,[(0,i._)("nav",m,[(0,i._)("div",g,[(0,i.Wm)(n,{to:"/"},{default:(0,i.w5)((()=>[h])),_:1}),v]),f,(0,i._)("div",w,[(0,i._)("ul",b,[(0,i._)("li",null,[(0,i.Wm)(n,{to:"/"},{default:(0,i.w5)((()=>[_])),_:1})]),(0,i._)("li",y,[(0,i.Wm)(r,{menuAttr:o.requestDD,requests:e.getRequests},null,8,["menuAttr","requests"])]),(0,i._)("li",k,[(0,i.Wm)(c,{accountAttr:o.accountDD},null,8,["accountAttr"])])])])])])])}var x=s(7139);const C=["id"],I={key:0,class:"number-circle danger",style:{"font-size":"11px"}},q=["aria-labelledby"],S={class:"card shadow-none m-0"},P={class:"card-header d-flex justify-content-between bg-primary"},E={class:"header-title bg-primary"},M={class:"mb-0 text-white"},A={class:"badge bg-light text-dark"},U={class:"card-body p-0"},T={key:0},j={key:0},N=(0,i._)("p",{class:"text-center mb-0"},"You don't have any notification",-1),O=[N],R={key:1},z={key:0},$=(0,i._)("p",{class:"text-center mb-0"},"You don't have any request",-1),F=[$];function G(e,t,s,a,o,l){const n=(0,i.up)("NotificationMessage"),r=(0,i.up)("FollowRequest");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("a",{href:"#",class:"dropdown-toggle d-grid","data-bs-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",id:s.menuAttr.id},[(0,i._)("i",{class:(0,x.C_)(s.menuAttr.icon)},null,2),0!==s.requests.length?((0,i.wg)(),(0,i.iD)("div",I,(0,x.zw)(s.requests.length),1)):(0,i.kq)("",!0)],8,C),(0,i._)("div",{class:(0,x.C_)(["follow-drop"===s.menuAttr.id?"sub-drop-large":"","sub-drop dropdown-menu"]),"aria-labelledby":s.menuAttr.id},[(0,i._)("div",S,[(0,i._)("div",P,[(0,i._)("div",E,[(0,i._)("h5",M,(0,x.zw)(s.menuAttr.title),1)]),(0,i._)("small",A,(0,x.zw)(s.requests.length),1)]),(0,i._)("div",U,["notification-drop"===s.menuAttr.id?((0,i.wg)(),(0,i.iD)("div",T,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(s.requests,((e,t)=>((0,i.wg)(),(0,i.iD)("div",{key:t,href:"#",class:"iq-sub-card"},[(0,i.Wm)(n,{notification:e},null,8,["notification"])])))),128)),0===s.requests.length?((0,i.wg)(),(0,i.iD)("div",j,O)):(0,i.kq)("",!0)])):"follow-drop"===s.menuAttr.id?((0,i.wg)(),(0,i.iD)("div",R,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(s.requests,((e,t)=>((0,i.wg)(),(0,i.iD)("div",{key:t.id,class:"iq-follow-request"},[(0,i.Wm)(r,{request:e,index:t},null,8,["request","index"])])))),128)),0===s.requests.length?((0,i.wg)(),(0,i.iD)("div",z,F)):(0,i.kq)("",!0)])):(0,i.kq)("",!0)])])],10,q)],64)}const B={class:"col-12 iq-follow-request"},Z={class:"iq-sub-card iq-sub-card-big d-flex align-items-center justify-content-between"},W={class:"col-6 d-flex align-items-center"},L=["src"],V={class:"ms-3"},H={class:"mb-0"},Y={class:"mb-0"},K={class:"col-6 d-flex align-items-center justify-content-end"};function J(e,t,s,a,o,l){return(0,i.wg)(),(0,i.iD)("div",B,[(0,i._)("div",Z,[(0,i._)("div",W,[(0,i._)("img",{src:s.request.avatar,class:"col-2 profile-pic rounded-circle avatar-35",alt:"",height:"35",width:"35"},null,8,L),(0,i._)("div",V,[(0,i._)("h6",H,(0,x.zw)(s.request.author),1),(0,i._)("p",Y,(0,x.zw)(s.request.sub),1)])]),(0,i._)("div",K,[(0,i._)("a",{onClick:t[0]||(t[0]=(...e)=>l.accept&&l.accept(...e)),class:"me-3 btn btn-primary rounded"},"Confirm"),(0,i._)("a",{onClick:t[1]||(t[1]=(...e)=>l.decline&&l.decline(...e)),class:"me-3 btn btn-secondary rounded"},"Decline")])])])}var Q=s(65),X=s(6265),ee=s.n(X),te={name:"FollowRequest",props:{request:{type:Object,default:()=>({})},index:{type:Number}},methods:{...(0,Q.OI)({removeRequest:"REMOVE_REQUEST"}),async accept(){if("followRequest"==this.request.type)var e=await ee().get("api/acceptrequest",{params:{id:this.request.authorId,type:this.request.type},withCredentials:!0});else"groupFollowRequest"==this.request.type?e=await ee().get("api/groupacceptrequest",{params:{id:this.request.authorId,groupId:this.request.groupId,type:this.request.type},withCredentials:!0}):"inviteRequest"==this.request.type?e=await ee().get("api/groupacceptrequest",{params:{id:this.request.dest,groupId:this.request.groupId,type:this.request.type},withCredentials:!0}):"newEvent"==this.request.type&&(e=await ee().get("api/event/accept",{params:{id:this.request.eventId},withCredentials:!0}));this.parseResponse(e)},async decline(){if("followRequest"==this.request.type)var e=await ee().get("api/declinerequest",{params:{id:this.request.authorId,type:this.request.type},withCredentials:!0});else"groupFollowRequest"==this.request.type?e=await ee().get("api/groupdeclinerequest",{params:{id:this.request.authorId,groupId:this.request.groupId,type:this.request.type},withCredentials:!0}):"inviteRequest"==this.request.type?e=await ee().get("api/groupdeclinerequest",{params:{id:this.request.dest,groupId:this.request.groupId,type:this.request.type},withCredentials:!0}):"newEvent"==this.request.type&&(e=await ee().get("api/event/decline",{params:{id:this.request.eventId},withCredentials:!0}));this.parseResponse(e)},parseResponse(e){!1!==e.data.ok?(this.$toast.open({message:e.data.message,type:"success"}),this.removeRequest(this.index)):this.$toast.open({message:e.data.message,type:"error"})}}},se=s(89);const ae=(0,se.Z)(te,[["render",J]]);var ie=ae;const oe={class:"d-flex align-items-center"},le={class:""},ne=["src"],re={class:"ms-3 w-100"},ce={class:"mb-0"},de={class:"d-flex justify-content-between align-items-center"},ue={class:"mb-0"},pe={class:"float-right font-size-12"};function me(e,t,s,a,o,l){return(0,i.wg)(),(0,i.iD)("div",oe,[(0,i._)("div",le,[(0,i._)("img",{src:s.notification.avatar,class:"profile-pic rounded-circle avatar-35",alt:""},null,8,ne)]),(0,i._)("div",re,[(0,i._)("h6",ce,(0,x.zw)(s.notification.author),1),(0,i._)("div",de,[(0,i._)("p",ue,(0,x.zw)(s.notification.sub),1),(0,i._)("small",pe,(0,x.zw)(s.notification.time),1)])])])}var ge={name:"NotificationMessage",props:{notification:{type:Object,default:()=>({})}}};const he=(0,se.Z)(ge,[["render",me]]);var ve=he,fe={name:"NavDropDown",props:{menuAttr:{type:Object,default:()=>({id:"",icon:"",title:""})},requests:{type:Array,default:()=>[]}},components:{FollowRequest:ie,NotificationMessage:ve}};const we=(0,se.Z)(fe,[["render",G]]);var be=we;const _e=["id"],ye=["src"],ke={class:"caption"},De={class:"mb-0 line-height"},xe=["aria-labelledby"],Ce={class:"card shadow-none m-0"},Ie={class:"card-header bg-primary"},qe={class:"header-title"},Se={class:"mb-0 text-white"},Pe={class:"card-body p-0"},Ee=(0,i._)("div",{class:"d-flex align-items-center"},[(0,i._)("div",{class:"rounded card-icon bg-soft-primary"},[(0,i._)("i",{class:"ri-file-user-line"})]),(0,i._)("div",{class:"ms-3"},[(0,i._)("h6",{class:"mb-0"},"My Profile"),(0,i._)("p",{class:"mb-0 font-size-12"}," View personal profile details. ")])],-1),Me=(0,i._)("div",{class:"d-flex align-items-center"},[(0,i._)("div",{class:"rounded card-icon bg-soft-warning"},[(0,i._)("i",{class:"ri-profile-line"})]),(0,i._)("div",{class:"ms-3"},[(0,i._)("h6",{class:"mb-0"},"Edit Profile"),(0,i._)("p",{class:"mb-0 font-size-12"}," Modify your personal details. ")])],-1),Ae=(0,i._)("div",{class:"d-flex align-items-center"},[(0,i._)("div",{class:"rounded card-icon bg-soft-danger"},[(0,i._)("i",{class:"ri-lock-line"})]),(0,i._)("div",{class:"ms-3"},[(0,i._)("h6",{class:"mb-0"},"Privacy Settings"),(0,i._)("p",{class:"mb-0 font-size-12"}," Control your privacy parameters. ")])],-1),Ue={class:"d-inline-block w-100 text-center p-3"},Te=(0,i.Uk)(" Sign out"),je=(0,i._)("i",{class:"ri-login-box-line ms-2"},null,-1),Ne=[Te,je];function Oe(e,t,s,a,o,l){const n=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("a",{href:"#",class:"d-flex align-items-center dropdown-toggle","data-bs-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",id:s.accountAttr.id},[(0,i._)("img",{src:e.getAvatar,class:"img-fluid rounded-circle me-3",alt:"user"},null,8,ye),(0,i._)("div",ke,[(0,i._)("h6",De,(0,x.zw)(s.accountAttr.name),1)])],8,_e),(0,i._)("div",{class:"sub-drop dropdown-menu caption-menu","aria-labelledby":s.accountAttr.id},[(0,i._)("div",Ce,[(0,i._)("div",Ie,[(0,i._)("div",qe,[(0,i._)("h5",Se,"Hello, "+(0,x.zw)(s.accountAttr.name)+"!",1)])]),(0,i._)("div",Pe,[(0,i.Wm)(n,{class:"iq-sub-card iq-bg-primary-hover",to:"/user/"+s.accountAttr.id},{default:(0,i.w5)((()=>[Ee])),_:1},8,["to"]),(0,i.Wm)(n,{class:"iq-sub-card iq-bg-primary-hover",to:"/profile-settings"},{default:(0,i.w5)((()=>[Me])),_:1}),(0,i.Wm)(n,{class:"link-anchor iq-sub-card iq-bg-primary-hover",to:"/privacy-settings"},{default:(0,i.w5)((()=>[Ae])),_:1}),(0,i._)("div",Ue,[(0,i._)("a",{class:"btn btn-primary iq-sign-btn",role:"button",onClick:t[0]||(t[0]=(...e)=>l.logout&&l.logout(...e))},Ne)])])])],8,xe)],64)}var Re={name:"AccountDropDown",props:{accountAttr:{type:Object,default:()=>({id:"",name:""})}},computed:{...(0,Q.Se)({getAvatar:"auth/avatar"})},methods:{logout(){this.$router.push("/logout")}}};const ze=(0,se.Z)(Re,[["render",Oe]]);var $e=ze,Fe={components:{NavDropDown:be,AccountDropDown:$e},name:"TopBar",data(){return{requestDD:{id:"follow-drop",icon:"ri-notification-4-line",title:"All Notifications"},accountDD:{id:"",name:""}}},computed:{...(0,Q.Se)({getRequests:"requests"})},created(){const e=this.getUserData();this.accountDD.id=e.id,this.accountDD.name=`${e.firstName} ${e.lastName}`},methods:{...(0,Q.Se)({getUser:"auth/user"}),getUserData(){return this.getUser()}}};const Ge=(0,se.Z)(Fe,[["render",D]]);var Be=Ge;const Ze={class:"iq-sidebar sidebar-default"},We={id:"sidebar-scrollbar","data-scrollbar":"true",tabindex:"-1",style:{overflow:"hidden",outline:"none"}},Le={class:"scroll-content"},Ve={class:"iq-sidebar-menu"},He={id:"iq-sidebar-toggle",class:"iq-menu"},Ye=(0,i._)("div",{class:"p-5"},null,-1);function Ke(e,t,s,a,o,l){const n=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",Ze,[(0,i._)("div",We,[(0,i._)("div",Le,[(0,i._)("nav",Ve,[(0,i._)("ul",He,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.routerList,(e=>((0,i.wg)(),(0,i.iD)("li",{key:e.header,class:""},[(0,i.Wm)(n,{to:e.to},{default:(0,i.w5)((()=>[(0,i._)("i",{class:(0,x.C_)(e.icon)},null,2),(0,i._)("span",null,(0,x.zw)(e.header),1)])),_:2},1032,["to"])])))),128))])]),Ye])])])}var Je={name:"SideBar",props:{},data(){return{routerList:[{header:"News Feed",icon:"las la-newspaper",to:"/"},{header:"Chat",icon:"lab la-rocketchat",to:"/chat"},{header:"Groups",icon:"las la-users",to:"/group"},{header:"Follow Request",icon:"las la-plus",to:"/follow-request"}]}}};const Qe=(0,se.Z)(Je,[["render",Ke]]);var Xe=Qe,et={name:"AuthBase",components:{TopBar:Be,SideBar:Xe},data:()=>({}),mounted(){const e=document.querySelector(".wrapper-menu");e.addEventListener("click",(()=>{e.classList.toggle("open"),document.body.classList.toggle("sidebar-main")}))}};const tt=(0,se.Z)(et,[["render",d]]);var st=tt;const at={class:"sign-in-page"},it=(0,i.uE)('<div id="container-inside"><div id="circle-small"></div><div id="circle-medium"></div><div id="circle-large"></div><div id="circle-xlarge"></div><div id="circle-xxlarge"></div></div>',1),ot={class:"container p-0"},lt={class:"row no-gutters justify-content-center align-items-center h-100"},nt={class:"col-md-8 bg-white pt-5 pt-5 pb-5"};function rt(e,t,s,a,o,l){const n=(0,i.up)("router-view");return(0,i.wg)(),(0,i.iD)("section",at,[it,(0,i._)("div",ot,[(0,i._)("div",lt,[(0,i._)("div",nt,[(0,i.Wm)(n)])])])])}var ct={name:"UnAuthBase",data:()=>({})};const dt=(0,se.Z)(ct,[["render",rt]]);var ut=dt,pt={name:"App",components:{AuthBase:st,UnAuthBase:ut},computed:{...(0,Q.Se)({authenticated:"auth/authenticated"})},created(){this.authenticated&&this.$connect("ws://localhost:4000/api/socket")}};const mt=(0,se.Z)(pt,[["render",l]]);var gt=mt,ht=s(678);function vt(e,t,s,a,o,l){const n=(0,i.up)("NewsFeed");return(0,i.wg)(),(0,i.j4)(n)}const ft={class:"col-lg-8 row m-0 p-0"},wt={class:"col-12 text-center mt-2 mb-2"};function bt(e,t,s,a,o,l){const n=(0,i.up)("CreatePost"),r=(0,i.up)("PostContent"),c=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",ft,[(0,i.Wm)(n),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.showPosts,(e=>((0,i.wg)(),(0,i.j4)(c,{key:e.post.id,to:"/post/"+e.post.id,style:{"text-decoration":"none",color:"inherit"}},{default:(0,i.w5)((()=>[(0,i.Wm)(r,{postData:e},null,8,["postData"])])),_:2},1032,["to"])))),128)),(0,i._)("div",wt,[e.postsToShow<e.posts.length?((0,i.wg)(),(0,i.iD)("button",{key:0,type:"button",class:"btn btn-primary col-6",onClick:t[0]||(t[0]=t=>e.postsToShow+=5)},"Load more")):(0,i.kq)("",!0)])])}const _t={class:"col-sm-12"},yt={id:"post-modal-data",class:"card card-block card-stretch card-height"},kt=(0,i._)("div",{class:"card-header d-flex justify-content-between"},[(0,i._)("div",{class:"header-title"},[(0,i._)("h4",{class:"card-title"},"Create Post")])],-1),Dt={class:"card-body"},xt={class:"d-flex align-items-center"},Ct={class:"user-img"},It=["src"],qt={class:"post-text ms-3 w-100",action:"javascript:void();"},St=(0,i._)("hr",null,null,-1);function Pt(e,t,s,a,o,l){const n=(0,i.up)("NewPostModal");return(0,i.wg)(),(0,i.iD)("div",_t,[(0,i._)("div",yt,[kt,(0,i._)("div",Dt,[(0,i._)("div",xt,[(0,i._)("div",Ct,[(0,i._)("img",{src:e.getAvatar,alt:"userimg",class:"avatar-60 profile-pic rounded-circle"},null,8,It)]),(0,i._)("form",qt,[(0,i._)("input",{type:"text",onClick:t[0]||(t[0]=(...e)=>l.openModal&&l.openModal(...e)),class:"form-control rounded",placeholder:"Write something here...",style:{border:"none"}})])]),St]),(0,i.Wm)(n,{modalId:"postModal",groupPost:s.groupPost,groupId:s.groupId,onCloseModal:l.closeModal},null,8,["groupPost","groupId","onCloseModal"])])])}var Et=s(7154),Mt=s.n(Et);const At=e=>((0,i.dD)("data-v-bb639890"),e=e(),(0,i.Cn)(),e),Ut=["id"],Tt={class:"modal-dialog"},jt={class:"modal-content"},Nt=At((()=>(0,i._)("div",{class:"modal-header"},[(0,i._)("h5",{class:"modal-title",id:"modalLabel"},"Create Post"),(0,i._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},[(0,i._)("i",{class:"ri-close-line"})])],-1))),Ot={class:"modal-body"},Rt={class:"d-flex align-items-center"},zt={class:"user-img"},$t=["src"],Ft={class:"post-text ms-3 w-100",action:"javascript:void();"},Gt=At((()=>(0,i._)("hr",null,null,-1))),Bt={class:"image-option"},Zt={class:"d-flex align-items-center justify-content-between"},Wt=At((()=>(0,i._)("div",{class:"col-6 d-flex align-items-center"},[(0,i._)("h6",null,"Choose the image to upload")],-1))),Lt={class:"col-6"},Vt={key:0},Ht=At((()=>(0,i._)("hr",null,null,-1))),Yt={class:"share-option"},Kt={class:"d-flex align-items-center justify-content-between"},Jt=At((()=>(0,i._)("div",{class:"d-flex align-items-center"},[(0,i._)("h6",null,"Choose the privacy of the post")],-1))),Qt={class:"card-post-toolbar"},Xt={class:"dropdown"},es={class:"dropdown-toggle","data-bs-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",role:"button"},ts={class:"btn btn-primary"},ss={class:"dropdown-menu mt-2 m-0 p-0"},as=["onClick"],is={class:"d-flex align-items-top"},os={class:"data ms-2"},ls={class:"mb-0"},ns={key:1},rs=At((()=>(0,i._)("hr",null,null,-1))),cs={class:"share-option"},ds={class:"d-flex align-items-center justify-content-between"},us=At((()=>(0,i._)("div",{class:"d-flex align-items-center"},[(0,i._)("h6",null,"Choose the followers to give access")],-1))),ps={class:"modal-footer justify-content-center"};function ms(e,t,s,o,l,n){const r=(0,i.up)("SelectionDropDown");return(0,i.wg)(),(0,i.iD)("div",{class:"modal fade",id:s.modalId,ref:s.modalId,tabindex:"-1","aria-labelledby":"modalLabel","aria-hidden":"true",style:{overflow:"inherit"}},[(0,i._)("div",Tt,[(0,i._)("div",jt,[Nt,(0,i._)("div",Ot,[(0,i._)("div",Rt,[(0,i._)("div",zt,[(0,i._)("img",{src:e.getAvatar,alt:"userimg",class:"avatar-60 profile-pic rounded-circle"},null,8,$t)]),(0,i._)("form",Ft,[(0,i.wy)((0,i._)("textarea",{type:"text",id:"newPostTextArea",class:"form-control rounded",placeholder:"Write something here...",style:{border:"none"},"onUpdate:modelValue":t[0]||(t[0]=e=>l.postContent=e)},null,512),[[a.nr,l.postContent]])])]),Gt,(0,i._)("div",Bt,[(0,i._)("div",Zt,[Wt,(0,i._)("div",Lt,[(0,i._)("input",{class:"form-control mb-0",accept:"image/png, image/gif, image/jpeg",type:"file",onChange:t[1]||(t[1]=(...e)=>n.setImage&&n.setImage(...e))},null,32)])])]),s.groupPost?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",Vt,[Ht,(0,i._)("div",Yt,[(0,i._)("div",Kt,[Jt,(0,i._)("div",Qt,[(0,i._)("div",Xt,[(0,i._)("span",es,[(0,i._)("span",ts,(0,x.zw)(n.setShareSettingType),1)]),(0,i._)("div",ss,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.shareSettings,((e,t)=>((0,i.wg)(),(0,i.iD)("a",{key:e.type,class:"dropdown-item p-3",href:"#",onClick:e=>l.currentShareSettings=t},[(0,i._)("div",is,[(0,i._)("i",{class:(0,x.C_)(["h4",e.icon])},null,2),(0,i._)("div",os,[(0,i._)("h6",null,(0,x.zw)(e.type),1),(0,i._)("p",ls,(0,x.zw)(e.sub),1)])])],8,as)))),128))])])])])])])),2===l.currentShareSettings?((0,i.wg)(),(0,i.iD)("div",ns,[rs,(0,i._)("div",cs,[(0,i._)("div",ds,[us,(0,i.Wm)(r,{selectionAttr:l.selectionDD},null,8,["selectionAttr"])])])])):(0,i.kq)("",!0)]),(0,i._)("div",ps,[(0,i._)("button",{type:"button",class:"col-4 btn btn-primary",onClick:t[2]||(t[2]=(...e)=>n.submit&&n.submit(...e))},"Post")])])])],8,Ut)}const gs=e=>((0,i.dD)("data-v-16d4f570"),e=e(),(0,i.Cn)(),e),hs={class:"btn-group"},vs={class:"dropdown-menu",onclick:"event.stopPropagation()"},fs={key:0},ws={class:"mx-2 dropdown-element"},bs=["id","onUpdate:modelValue"],_s=["for"],ys=gs((()=>(0,i._)("hr",{class:"m-0"},null,-1))),ks={key:1},Ds=gs((()=>(0,i._)("p",{class:"m-0 text-center"},"You don't have followers :(",-1))),xs=[Ds];function Cs(e,t,s,o,l,n){return(0,i.wg)(),(0,i.iD)("div",hs,[(0,i._)("button",{type:"button",class:"btn btn-primary dropdown-toggle","data-bs-toggle":"dropdown",style:(0,x.j5)(s.additionalButton?"border-top-left-radius: 0; border-bottom-left-radius: 0":"")},(0,x.zw)(s.selectionAttr.label),5),(0,i._)("div",vs,[0!==s.selectionAttr.elements.length?((0,i.wg)(),(0,i.iD)("div",fs,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(s.selectionAttr.elements,((e,t)=>((0,i.wg)(),(0,i.iD)("div",{key:t},[(0,i._)("div",ws,[(0,i.wy)((0,i._)("input",{type:"checkbox",id:e.id,"onUpdate:modelValue":t=>e.selected=t},null,8,bs),[[a.e8,e.selected]]),(0,i._)("label",{for:e.id},(0,x.zw)(e.firstName)+" "+(0,x.zw)(e.lastName),9,_s)]),ys])))),128))])):((0,i.wg)(),(0,i.iD)("div",ks,xs))])])}var Is={name:"SelectionDropDown",props:{selectionAttr:{type:Object,default:()=>({label:"Selection",elements:[]})},additionalButton:{type:Boolean,default:!1}}};const qs=(0,se.Z)(Is,[["render",Cs],["__scopeId","data-v-16d4f570"]]);var Ss=qs,Ps={name:"NewPostModal",props:{groupPost:{type:Boolean,default:!1},modalId:{type:String,default:""},groupId:{type:String,default:""}},components:{SelectionDropDown:Ss},data(){return{postContent:"",postImage:null,currentShareSettings:0,shareSettings:[{type:"Public",sub:"Anyone of network",icon:"ri-save-line"},{type:"Followers",sub:"Only your followers",icon:"ri-close-circle-line"},{type:"Only for...",sub:"Shows only to some followers",icon:"ri-user-unfollow-line"}],selectionDD:{label:"Followers",elements:[]}}},async created(){let e=await ee().get("api/followers",{withCredentials:!0});e.data?this.selectionDD.elements=e.data:this.selectionDD.elements=[]},computed:{...(0,Q.Se)({getAvatar:"auth/avatar"}),setShareSettingType(){return this.shareSettings[this.currentShareSettings].type}},mounted(){const e=document.getElementById("newPostTextArea"),t=120;e.oninput=function(){e.style.height="",e.style.height=Math.min(e.scrollHeight,t)+"px"}},methods:{async submit(){let e={postContent:this.postContent,postImage:this.postImage,postShare:this.currentShareSettings,followers:JSON.stringify(this.selectionDD.elements),groupPost:this.groupPost,groupId:this.groupId};if(!0===this.groupPost&&(e.postShare=3),!this.postContent)return void this.$toast.open({message:"Please fill post content!",type:"error"});if(2===this.currentShareSettings){let t=this.selectionDD.elements.filter((e=>e.selected));if(0===t.length)return void this.$toast.open({message:"You must select at least one folower!",type:"error"});e.followers=JSON.stringify(t)}let t=await ee().post("api/post/new",e,{withCredentials:!0,headers:{"Content-Type":"multipart/form-data"}});!0===t.data.ok&&(this.$toast.open({message:t.data.message,type:"success"}),this.$emit("closeModal"),this.$router.push(t.data.data))},setImage(e){var t=e.target.files||e.dataTransfer.files;if(!t.length)return;const s=t[0],[a]=s.type.split("/");return"image"!=a?(this.$toast.open({message:"Only images allowed to upload!",type:"error"}),e.target.value=null,void(this.postImage=null)):s.size>2048e3?(this.$toast.open({message:"Image size must be less than 2 MB!",type:"error"}),e.target.value=null,void(this.postImage=null)):void(this.postImage=s)}}};const Es=(0,se.Z)(Ps,[["render",ms],["__scopeId","data-v-bb639890"]]);var Ms=Es,As={name:"CreatePost",components:{NewPostModal:Ms},props:{groupPost:{type:Boolean,default:!1},groupId:{type:String,default:""}},data(){return{modal:null}},computed:{...(0,Q.Se)({getAvatar:"auth/avatar"})},mounted(){this.modal=new(Mt().Modal)(document.getElementById("postModal"))},methods:{openModal(){this.modal.show()},closeModal(){this.modal.hide()}}};const Us=(0,se.Z)(As,[["render",Pt]]);var Ts=Us;const js={key:0},Ns={class:"text-center"},Os={key:1,class:"col-sm-12"},Rs={class:"card card-block card-stretch card-height"},zs={class:"card-body"},$s={class:"user-post-data"},Fs={class:"d-flex justify-content-between"},Gs={class:"me-3"},Bs=["src"],Zs={class:"w-100"},Ws={class:"d-flex justify-content-between"},Ls={class:""},Vs={class:"d-flex gap-2"},Hs={class:"mb-0 d-inline-block"},Ys={class:"mb-0 d-inline-block"},Ks=(0,i.Uk)("Added New Post "),Js={key:0},Qs=(0,i.Uk)(" In "),Xs={class:"mb-0 text-primary"},ea={class:"mt-3 mb-2"},ta={key:0},sa={key:1},aa={key:0,class:"user-post text-center col-6 m-auto"},ia=["src"],oa={class:"comment-area"},la={key:0},na={class:"comment-text d-flex align-items-center mt-3",action:"javascript:void(0);"},ra={class:"input-group"},ca={class:"input-group-append"},da={for:"new-image",class:"btn btn-outline-secondary",style:{"border-top-left-radius":"0","border-bottom-left-radius":"0"}},ua={class:"d-flex"},pa=(0,i._)("i",{class:"ri-camera-line"},null,-1),ma={key:0,class:"mx-1"},ga=(0,i._)("hr",null,null,-1),ha={key:1,class:"m-0 mb-3"},va={class:"post-comments list-inline p-0 m-0"},fa={key:2,class:"text-center"},wa=(0,i.Uk)("Read all comments"),ba={key:3},_a=(0,i._)("h5",{class:"text-center"},"No comments yet",-1),ya=[_a];function ka(e,t,s,o,l,n){const r=(0,i.up)("router-link"),c=(0,i.up)("PostComment");return(0,i.wg)(),(0,i.iD)(i.HY,null,[!1===s.postData.ok?((0,i.wg)(),(0,i.iD)("div",js,[(0,i._)("h3",Ns,(0,x.zw)(s.postData.message),1)])):(0,i.kq)("",!0),s.postData.post?((0,i.wg)(),(0,i.iD)("div",Os,[(0,i._)("div",Rs,[(0,i._)("div",zs,[(0,i._)("div",$s,[(0,i._)("div",Fs,[(0,i._)("div",Gs,[(0,i.Wm)(r,{to:"/user/1"},{default:(0,i.w5)((()=>[(0,i._)("img",{src:s.postData.post.avatar,class:"profile-pic rounded-circle avatar-50",alt:""},null,8,Bs)])),_:1})]),(0,i._)("div",Zs,[(0,i._)("div",Ws,[(0,i._)("div",Ls,[(0,i._)("div",Vs,[(0,i.Wm)(r,{to:"/user/"+s.postData.post.authorId},{default:(0,i.w5)((()=>[(0,i._)("h5",Hs,(0,x.zw)(s.postData.post.firstName)+" "+(0,x.zw)(s.postData.post.lastName),1)])),_:1},8,["to"]),(0,i._)("span",Ys,[Ks,s.postData.post.groupTitle?((0,i.wg)(),(0,i.iD)("span",Js,[Qs,(0,i.Wm)(r,{to:"/group/"+s.postData.post.groupId},{default:(0,i.w5)((()=>[(0,i.Uk)((0,x.zw)(s.postData.post.groupTitle),1)])),_:1},8,["to"])])):(0,i.kq)("",!0)])]),(0,i._)("p",Xs,(0,x.zw)(n.timeFormat),1)])])])])]),(0,i._)("div",ea,[s.preview?((0,i.wg)(),(0,i.iD)("p",sa,(0,x.zw)(s.postData.post.content),1)):((0,i.wg)(),(0,i.iD)("p",ta,(0,x.zw)(s.postData.post.content.substring(0,150)+"....."),1))]),s.postData.post.picture?((0,i.wg)(),(0,i.iD)("div",aa,[(0,i._)("img",{src:s.postData.post.picture,alt:"post-image",class:"img-fluid rounded"},null,8,ia)])):(0,i.kq)("",!0),(0,i._)("div",oa,[s.preview?((0,i.wg)(),(0,i.iD)("div",la,[(0,i._)("form",na,[(0,i._)("div",ra,[(0,i.wy)((0,i._)("input",{type:"text",class:"form-control","onUpdate:modelValue":t[0]||(t[0]=e=>l.comment=e),placeholder:"Enter Your Comment",style:{"border-top-right-radius":"0","border-bottom-right-radius":"0"}},null,512),[[a.nr,l.comment]]),(0,i._)("div",ca,[(0,i._)("label",da,[(0,i._)("div",ua,[pa,l.commentImage?((0,i.wg)(),(0,i.iD)("div",ma,(0,x.zw)(l.commentImage.name),1)):(0,i.kq)("",!0)])]),(0,i._)("input",{class:"form-control mb-0",id:"new-image",accept:"image/png, image/gif, image/jpeg",type:"file",onChange:t[1]||(t[1]=(...e)=>n.setImage&&n.setImage(...e)),style:{display:"none"}},null,32),(0,i._)("button",{class:"btn btn-outline-secondary mx-2",type:"button",onClick:t[2]||(t[2]=(...e)=>n.submit&&n.submit(...e))},"Submit")])])])])):(0,i.kq)("",!0),ga,s.preview?((0,i.wg)(),(0,i.iD)("p",ha,"Total comments: "+(0,x.zw)(n.commentsLength),1)):(0,i.kq)("",!0),(0,i._)("ul",va,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.comments,((e,t)=>((0,i.wg)(),(0,i.iD)("li",{class:"mb-2",key:t},[(0,i.Wm)(c,{comment:e},null,8,["comment"])])))),128))]),0!=n.comments?((0,i.wg)(),(0,i.iD)("div",fa,[s.preview?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(r,{key:0,to:"/post/1"},{default:(0,i.w5)((()=>[wa])),_:1})),s.preview&&l.showComments<n.commentsLength?((0,i.wg)(),(0,i.iD)("button",{key:1,type:"button",class:"btn btn-primary",onClick:t[3]||(t[3]=e=>l.showComments+=5)},"Load more")):(0,i.kq)("",!0)])):((0,i.wg)(),(0,i.iD)("div",ba,ya))])])])])):(0,i.kq)("",!0)],64)}const Da={class:"d-flex"},xa={class:"user-img",style:{"min-width":"35px"}},Ca=["src"],Ia={class:"comment-data-block ms-3"},qa={class:"d-inline-flex"},Sa={class:"mb-0",style:{"font-size":"14px"}},Pa=["src"],Ea={class:"d-flex flex-wrap align-items-center comment-activity"},Ma={class:"text-primary"},Aa=(0,i._)("hr",null,null,-1);function Ua(e,t,s,a,o,l){const n=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("div",Da,[(0,i._)("div",xa,[(0,i.Wm)(n,{to:"/user/"+s.comment.authorId},{default:(0,i.w5)((()=>[(0,i._)("img",{src:s.comment.avatar,alt:"userimg",class:"avatar-35 profile-pic rounded-circle img-fluid",width:"35px",height:"35px"},null,8,Ca)])),_:1},8,["to"])]),(0,i._)("div",Ia,[(0,i.Wm)(n,{to:"/user/"+s.comment.authorId},{default:(0,i.w5)((()=>[(0,i._)("h6",qa,(0,x.zw)(s.comment.firstName)+" "+(0,x.zw)(s.comment.lastName),1)])),_:1},8,["to"]),(0,i._)("p",Sa,(0,x.zw)(s.comment.content),1),s.comment.picture?((0,i.wg)(),(0,i.iD)("img",{key:0,src:s.comment.picture,alt:"",style:{"max-width":"300px","max-height":"300px"}},null,8,Pa)):(0,i.kq)("",!0),(0,i._)("div",Ea,[(0,i._)("span",Ma,(0,x.zw)(l.timeFormat),1)])])]),Aa],64)}var Ta={name:"PostComment",props:{comment:{type:Object}},computed:{timeFormat(){return Qm(this.comment.createdAt)}}};const ja=(0,se.Z)(Ta,[["render",Ua]]);var Na=ja,Oa={name:"PostContent",components:{PostComment:Na},props:{preview:{type:Boolean,default:!1},postData:{type:Object}},data(){return{comment:"",showComments:this.preview?5:1,commentImage:null}},computed:{timeFormat(){return Qm(this.postData.post.createdAt)},commentsLength(){return this.postData.comments?this.postData.comments.length:0},comments(){return this.postData.comments?this.postData.comments.slice(0,this.showComments):[]}},methods:{async submit(){let e={commentContent:this.comment,commentImage:this.commentImage,postId:this.postData.post.id};if(!this.comment)return void this.$toast.open({message:"Comment can't be empty!",type:"error"});let t=await ee().post("api/post/comment",e,{withCredentials:!0,headers:{"Content-Type":"multipart/form-data"}});!0===t.data.ok&&(this.$toast.open({message:t.data.message,type:"success"}),this.$router.go(0))},setImage(e){var t=e.target.files||e.dataTransfer.files;if(!t.length)return;const s=t[0],[a]=s.type.split("/");return"image"!=a?(this.$toast.open({message:"Only images allowed to upload!",type:"error"}),e.target.value=null,void(this.commentImage=null)):s.size>2048e3?(this.$toast.open({message:"Image size must be less than 2 MB!",type:"error"}),e.target.value=null,void(this.commentImage=null)):void(this.commentImage=s)}}};const Ra=(0,se.Z)(Oa,[["render",ka]]);var za=Ra,$a={name:"NewsFeed",components:{CreatePost:Ts,PostContent:za},data:()=>({posts:[],postsToShow:5}),computed:{showPosts(){return this.posts.slice(0,this.postsToShow)}},async created(){let e=await ee().get("api/allposts",{withCredentials:!0});this.posts=e.data}};const Fa=(0,se.Z)($a,[["render",bt]]);var Ga=Fa,Ba=(0,i.aZ)({name:"HomeView",components:{NewsFeed:Ga}});const Za=(0,se.Z)(Ba,[["render",vt]]);var Wa=Za;function La(e,t,s,a,o,l){const n=(0,i.up)("SignIn");return(0,i.wg)(),(0,i.j4)(n)}const Va={class:"sign-in-from"},Ha=(0,i._)("h1",{class:"mb-0"},"Sign In",-1),Ya=(0,i._)("p",null,"Enter your email address and password to access social network.",-1),Ka={class:"col-12 form-group"},Ja=(0,i._)("label",{class:"form-label"},"Email",-1),Qa=(0,i._)("div",{class:"invalid-feedback",id:"email-feedback"},null,-1),Xa={class:"col-12 form-group"},ei=(0,i._)("label",{class:"form-label"},"Password",-1),ti=(0,i._)("div",{class:"invalid-feedback",id:"password-feedback"},null,-1),si=(0,i._)("div",{class:"d-inline-block w-100"},[(0,i._)("button",{type:"submit",class:"btn btn-primary float-end"}," Sign in ")],-1),ai={class:"sign-info"},ii={class:"dark-color d-inline-block line-height-2"},oi=(0,i.Uk)(" Don't have an account? "),li=(0,i.Uk)("Sign Up");function ni(e,t,s,o,l,n){const r=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",Va,[Ha,Ya,(0,i._)("form",{class:"row mt-4",onSubmit:t[2]||(t[2]=(0,a.iM)(((...e)=>n.submit&&n.submit(...e)),["prevent"]))},[(0,i._)("div",Ka,[Ja,(0,i.wy)((0,i._)("input",{type:"email",class:"form-control mb-0",id:"email",placeholder:"Email","onUpdate:modelValue":t[0]||(t[0]=t=>e.form.email=t),autocomplete:""},null,512),[[a.nr,e.form.email]]),Qa]),(0,i._)("div",Xa,[ei,(0,i.wy)((0,i._)("input",{type:"password",class:"form-control mb-0",id:"password",placeholder:"Password","onUpdate:modelValue":t[1]||(t[1]=t=>e.form.password=t),autocomplete:""},null,512),[[a.nr,e.form.password]]),ti]),si,(0,i._)("div",ai,[(0,i._)("span",ii,[oi,(0,i.Wm)(r,{to:"/sign-up"},{default:(0,i.w5)((()=>[li])),_:1})])])],32)])}var ri={name:"SignIn",data:()=>({validation:{input:null,message:null},form:{email:"",password:""}}),methods:{...(0,Q.nv)({authMe:"auth/authMe"}),async submit(){try{let e=await ee().post("api/signin",this.form,{withCredentials:!0,headers:{"Content-Type":"application/x-www-form-urlencoded"}});const t=e.data;if(!1===t.ok)return void(this.validation={input:t.input,message:t.message});await this.authMe(t.token),this.$connect("ws://localhost:4000/api/socket"),this.$router.push("/")}catch(e){console.log("Something went wrong")}}},watch:{validation:{handler(e,t){e.input&&(console.log(e.input),document.querySelector(`#${e.input}`).classList.toggle("is-invalid"),document.querySelector(`#${e.input}-feedback`).textContent=e.message),t.input&&document.querySelector(`#${t.input}`).classList.toggle("is-invalid")},deep:!0}}};const ci=(0,se.Z)(ri,[["render",ni]]);var di=ci,ui=(0,i.aZ)({name:"SignInView",components:{SignIn:di}});const pi=(0,se.Z)(ui,[["render",La]]);var mi=pi;function gi(e,t,s,a,o,l){const n=(0,i.up)("SignUp");return(0,i.wg)(),(0,i.j4)(n)}const hi=e=>((0,i.dD)("data-v-158e3839"),e=e(),(0,i.Cn)(),e),vi={class:"sign-in-from"},fi=hi((()=>(0,i._)("h1",{class:"mb-0"},"Sign Up",-1))),wi=hi((()=>(0,i._)("p",null,"Fill your personal information to access social network.",-1))),bi={class:"col-6 form-group required"},_i=hi((()=>(0,i._)("label",{for:"firstName",class:"form-label"},"First Name",-1))),yi=hi((()=>(0,i._)("div",{class:"invalid-feedback",id:"firstName-feedback"},null,-1))),ki={class:"col-6 form-group required"},Di=hi((()=>(0,i._)("label",{for:"lastName",class:"form-label"},"Last Name",-1))),xi=hi((()=>(0,i._)("div",{class:"invalid-feedback",id:"lastName-feedback"},null,-1))),Ci={class:"col-6 form-group required"},Ii=hi((()=>(0,i._)("label",{for:"email",class:"form-label"},"Email",-1))),qi=hi((()=>(0,i._)("div",{class:"invalid-feedback",id:"email-feedback"},null,-1))),Si={class:"col-6 form-group required"},Pi=hi((()=>(0,i._)("label",{for:"birthDate",class:"form-label"},"Date of Birth",-1))),Ei=hi((()=>(0,i._)("div",{class:"invalid-feedback",id:"birthDate-feedback"},null,-1))),Mi={class:"col-6 form-group"},Ai=hi((()=>(0,i._)("label",{for:"nickname",class:"form-label"},"Nickname",-1))),Ui=hi((()=>(0,i._)("div",{class:"invalid-feedback",id:"nickname-feedback"},null,-1))),Ti={class:"col-6 form-group"},ji=hi((()=>(0,i._)("label",{for:"avatar",class:"form-label"},"Avatar",-1))),Ni=hi((()=>(0,i._)("div",{class:"invalid-feedback",id:"avatar-feedback"},null,-1))),Oi={class:"col-6 form-group"},Ri=hi((()=>(0,i._)("label",{for:"aboutMe",class:"form-label"},"About me",-1))),zi={class:"col-6 form-group required"},$i=hi((()=>(0,i._)("label",{for:"password",class:"form-label"},"Password",-1))),Fi=hi((()=>(0,i._)("div",{class:"invalid-feedback",id:"password-feedback"},null,-1))),Gi=(0,i.uE)('<div class="d-inline-block w-100" data-v-158e3839><div class="form-group form-check d-inline-block mt-2 pt-1 mb-0 required" data-v-158e3839><input type="checkbox" class="form-check-input" id="customCheck1" required data-v-158e3839><label class="form-label" for="customCheck1" data-v-158e3839> I accept <a href="#" data-v-158e3839>Terms and Conditions</a></label></div><button type="submit" class="btn btn-primary float-end" data-v-158e3839>Sign Up</button></div>',1),Bi={class:"sign-info"},Zi={class:"dark-color d-inline-block line-height-2"},Wi=(0,i.Uk)(" Already Have Account ? "),Li=(0,i.Uk)("Log In");function Vi(e,t,s,o,l,n){const r=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",vi,[fi,wi,(0,i._)("form",{class:"row mt-4",onSubmit:t[8]||(t[8]=(0,a.iM)(((...e)=>n.submit&&n.submit(...e)),["prevent"]))},[(0,i._)("div",bi,[_i,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.form.firstName=t),id:"firstName",placeholder:"First Name",type:"text",class:"form-control mb-0",required:""},null,512),[[a.nr,e.form.firstName]]),yi]),(0,i._)("div",ki,[Di,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[1]||(t[1]=t=>e.form.lastName=t),id:"lastName",placeholder:"Last Name",type:"text",class:"form-control mb-0",required:""},null,512),[[a.nr,e.form.lastName]]),xi]),(0,i._)("div",Ci,[Ii,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[2]||(t[2]=t=>e.form.email=t),id:"email",placeholder:"Email",type:"email",class:"form-control mb-0",required:""},null,512),[[a.nr,e.form.email]]),qi]),(0,i._)("div",Si,[Pi,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[3]||(t[3]=t=>e.form.birthDate=t),id:"birthDate",placeholder:"Date of Birth",type:"date",class:"form-control mb-0",required:""},null,512),[[a.nr,e.form.birthDate]]),Ei]),(0,i._)("div",Mi,[Ai,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[4]||(t[4]=t=>e.form.nickname=t),id:"nickname",placeholder:"Nickname",type:"text",class:"form-control mb-0",minlength:"4"},null,512),[[a.nr,e.form.nickname]]),Ui]),(0,i._)("div",Ti,[ji,(0,i._)("input",{onChange:t[5]||(t[5]=(...e)=>n.setAvatar&&n.setAvatar(...e)),id:"avatar",placeholder:"Avatar",type:"file",accept:"image/png, image/gif, image/jpeg",class:"form-control mb-0"},null,32),Ni]),(0,i._)("div",Oi,[Ri,(0,i.wy)((0,i._)("textarea",{"onUpdate:modelValue":t[6]||(t[6]=t=>e.form.aboutMe=t),type:"text",id:"aboutMe",placeholder:"About me",class:"form-control mb-0",style:{resize:"none",height:"60px"}},null,512),[[a.nr,e.form.aboutMe]])]),(0,i._)("div",zi,[$i,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[7]||(t[7]=t=>e.form.password=t),id:"password",placeholder:"Password",type:"password",class:"form-control mb-0",autocomplete:"false",required:""},null,512),[[a.nr,e.form.password]]),Fi]),Gi,(0,i._)("div",Bi,[(0,i._)("span",Zi,[Wi,(0,i.Wm)(r,{to:"/sign-in"},{default:(0,i.w5)((()=>[Li])),_:1})])])],32)])}var Hi={name:"SignUp",data:()=>({validation:{input:null,message:null},form:{firstName:"",lastName:"",email:"",birthDate:null,nickname:"",avatar:null,aboutMe:"",password:""}}),methods:{async submit(){try{let e=await ee().post("api/signup",this.form,{withCredentials:!0,headers:{"Content-Type":"multipart/form-data"}});const t=e.data;if(!1===t.ok)return void(this.validation={input:t.input,message:t.message});this.$router.push("sign-in")}catch(e){console.log("Something went wrong")}},setAvatar(e){var t=e.target.files||e.dataTransfer.files;if(!t.length)return;const s=t[0],[a]=s.type.split("/");"image"==a?s.size>2048e3?this.$toast.open({message:"Image size must be less than 2 MB!",type:"error"}):this.form.avatar=s:this.$toast.open({message:"Only images allowed to upload!",type:"error"})}},watch:{validation:{handler(e,t){e.input&&(console.log(e.input),document.querySelector(`#${e.input}`).classList.toggle("is-invalid"),document.querySelector(`#${e.input}-feedback`).textContent=e.message),t.input&&document.querySelector(`#${t.input}`).classList.toggle("is-invalid")},deep:!0}}};const Yi=(0,se.Z)(Hi,[["render",Vi],["__scopeId","data-v-158e3839"]]);var Ki=Yi,Ji=(0,i.aZ)({name:"SignUpView",components:{SignUp:Ki}});const Qi=(0,se.Z)(Ji,[["render",gi]]);var Xi=Qi;function eo(e,t,s,a,o,l){const n=(0,i.up)("PostContent");return(0,i.wg)(),(0,i.j4)(n,{postData:e.comppost,preview:!0},null,8,["postData"])}var to=(0,i.aZ)({name:"PostView",props:{postId:{type:String,default:""}},data(){return{post:{}}},components:{PostContent:za},computed:{comppost(){return this.post}},async created(){let e=await ee().get("api/post",{params:{id:this.postId},withCredentials:!0});this.post=e.data}});const so=(0,se.Z)(to,[["render",eo]]);var ao=so;function io(e,t,s,a,o,l){const n=(0,i.up)("UserProfile");return(0,i.wg)(),(0,i.j4)(n,{userId:e.userId},null,8,["userId"])}const oo={key:0},lo={class:"col-sm-12"},no={class:"text-center",style:{transform:"translate(0, 60px)",position:"relative","z-index":"10"}},ro=["src"],co=["src"],uo={class:"profile-detail"},po={class:"card"},mo={class:"card-body profile-page p-0"},go={class:"profile-header"},ho={class:"text-center"},vo={class:"profile-info p-3 d-flex align-items-center justify-content-between position-relative"},fo={class:"social-info"},wo={class:"social-data-block d-flex align-items-center justify-content-between list-inline p-0 m-0"},bo={class:"text-center ps-3"},_o=(0,i._)("h6",null,"Posts",-1),yo={class:"mb-0"},ko={class:"text-center ps-3"},Do=(0,i._)("h6",null,"Followers",-1),xo={class:"mb-0"},Co={class:"text-center ps-3"},Io=(0,i._)("h6",null,"Following",-1),qo={class:"mb-0"},So={style:{"z-index":"100"}},Po={class:"header-nav list-inline d-flex flex-wrap justify-end p-0 m-0"},Eo={key:0},Mo=(0,i._)("i",{class:"ri-settings-4-line"},null,-1),Ao={key:0,class:"card"},Uo=(0,i._)("div",{class:"card-body p-0"},[(0,i._)("div",{class:"user-tabing"},[(0,i._)("ul",{class:"nav nav-pills d-flex align-items-center justify-content-center profile-feed-items p-0 m-0"},[(0,i._)("li",{class:"nav-item col-12 col-sm-3 p-0"},[(0,i._)("a",{class:"nav-link active",href:"#pills-timeline-tab","data-bs-toggle":"pill","data-bs-target":"#timelineTab",role:"button"},"Timeline")]),(0,i._)("li",{class:"nav-item col-12 col-sm-3 p-0"},[(0,i._)("a",{class:"nav-link",href:"#pills-about-tab","data-bs-toggle":"pill","data-bs-target":"#aboutTab",role:"button"},"About")]),(0,i._)("li",{class:"nav-item col-12 col-sm-3 p-0"},[(0,i._)("a",{class:"nav-link",href:"#pills-followers-tab","data-bs-toggle":"pill","data-bs-target":"#followersTab",role:"button"},"Followers")])])])],-1),To=[Uo],jo={key:0,class:"col-sm-12"},No={class:"tab-content"},Oo={class:"tab-pane fade justify-content-center active show",id:"timelineTab",role:"tabpanel"},Ro={class:"col-12 text-center mt-2 mb-2"},zo={class:"tab-pane fade",id:"aboutTab",role:"tabpanel"},$o={class:"tab-pane fade",id:"followersTab",role:"tabpanel"},Fo={class:"card"},Go={class:"card-body"},Bo=(0,i._)("h2",null,"Followers",-1),Zo={class:"user-list-tab mt-2"},Wo=(0,i._)("ul",{class:"nav nav-pills d-flex align-items-center justify-content-left user-list-items p-0 mb-2"},[(0,i._)("li",null,[(0,i._)("a",{class:"nav-link active","data-bs-toggle":"pill",href:"#pill-all-users","data-bs-target":"#all-users"},"All Users")]),(0,i._)("li",null,[(0,i._)("a",{class:"nav-link","data-bs-toggle":"pill",href:"#pill-followers","data-bs-target":"#followers"},"Followers")]),(0,i._)("li",null,[(0,i._)("a",{class:"nav-link","data-bs-toggle":"pill",href:"#pill-following","data-bs-target":"#following"},"Following")])],-1),Lo={class:"tab-content"},Vo={class:"tab-pane fade active show",id:"all-users",role:"tabpanel"},Ho={class:"tab-pane fade",id:"followers",role:"tabpanel"},Yo={class:"tab-pane fade",id:"following",role:"tabpanel"},Ko={key:1},Jo=(0,i._)("h1",{class:"text-center mt-5"},"Account is Private",-1),Qo=[Jo],Xo={key:1},el=(0,i._)("h1",{class:"text-center mt-5"},"Account is not found",-1),tl=[el];function sl(e,t,s,a,o,l){const n=(0,i.up)("router-link"),r=(0,i.up)("CreatePost"),c=(0,i.up)("PostContent"),d=(0,i.up)("AboutInfo"),u=(0,i.up)("UserList");return e.profile.id?((0,i.wg)(),(0,i.iD)("div",oo,[(0,i._)("div",lo,[(0,i._)("div",no,[(0,i._)("div",null,[e.profile.isMyProfile?((0,i.wg)(),(0,i.iD)("img",{key:0,src:e.getAvatar,alt:"profile-img",class:"avatar-130 profile-pic rounded-circle"},null,8,ro)):((0,i.wg)(),(0,i.iD)("img",{key:1,src:e.profile.avatar,alt:"profile-img",class:"avatar-130 profile-pic rounded-circle"},null,8,co))]),(0,i._)("div",uo,[(0,i._)("h3",null,(0,x.zw)(e.profile.firstName)+" "+(0,x.zw)(e.profile.lastName),1)])]),(0,i._)("div",po,[(0,i._)("div",mo,[(0,i._)("div",go,[(0,i._)("div",ho,[(0,i._)("div",vo,[(0,i._)("div",fo,[(0,i._)("ul",wo,[(0,i._)("li",bo,[_o,(0,i._)("p",yo,(0,x.zw)(e.profile.totalPosts),1)]),(0,i._)("li",ko,[Do,(0,i._)("p",xo,(0,x.zw)(e.profile.totalFollowers),1)]),(0,i._)("li",Co,[Io,(0,i._)("p",qo,(0,x.zw)(e.profile.totalFollows),1)])])]),(0,i._)("div",So,[(0,i._)("ul",Po,[e.profile.isMyProfile?((0,i.wg)(),(0,i.iD)("li",Eo,[(0,i.Wm)(n,{to:"/profile-settings"},{default:(0,i.w5)((()=>[Mo])),_:1})])):(0,i.kq)("",!0),e.profile.isMyProfile||e.profile.private||e.profile.following?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("a",{key:1,onClick:t[0]||(t[0]=(...e)=>l.follow&&l.follow(...e)),class:"me-3 btn btn-primary rounded"},"Follow")),!e.profile.isMyProfile&&e.profile.following?((0,i.wg)(),(0,i.iD)("a",{key:2,onClick:t[1]||(t[1]=(...e)=>l.unfollow&&l.unfollow(...e)),class:"me-3 btn btn-warning rounded"},"Unfollow")):(0,i.kq)("",!0),e.profile.isMyProfile||!e.profile.private||e.profile.following?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("a",{key:3,onClick:t[2]||(t[2]=(...e)=>l.requestToFollow&&l.requestToFollow(...e)),class:"me-3 btn btn-success rounded"},"Request To Follow"))])])])])])])]),!e.profile.private||e.profile.isMyProfile||e.profile.following?((0,i.wg)(),(0,i.iD)("div",Ao,To)):(0,i.kq)("",!0)]),!e.profile.private||e.profile.isMyProfile||e.profile.following?((0,i.wg)(),(0,i.iD)("div",jo,[(0,i._)("div",No,[(0,i._)("div",Oo,[e.profile.isMyProfile?((0,i.wg)(),(0,i.j4)(r,{key:0})):(0,i.kq)("",!0),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.showPosts,(e=>((0,i.wg)(),(0,i.j4)(n,{key:e.post.id,to:"/post/"+e.post.id,style:{"text-decoration":"none",color:"inherit"}},{default:(0,i.w5)((()=>[(0,i.Wm)(c,{postData:e},null,8,["postData"])])),_:2},1032,["to"])))),128)),(0,i._)("div",Ro,[e.postsToShow<e.profile.posts.length?((0,i.wg)(),(0,i.iD)("button",{key:0,type:"button",class:"btn btn-primary col-6",onClick:t[3]||(t[3]=t=>e.postsToShow+=5)},"Load more")):(0,i.kq)("",!0)])]),(0,i._)("div",zo,[(0,i.Wm)(d,{info:e.profile},null,8,["info"])]),(0,i._)("div",$o,[(0,i._)("div",Fo,[(0,i._)("div",Go,[Bo,(0,i._)("div",Zo,[Wo,(0,i._)("div",Lo,[(0,i._)("div",Vo,[(0,i.Wm)(u,{users:e.profile.followers,isMe:e.profile.isMyProfile},null,8,["users","isMe"])]),(0,i._)("div",Ho,[(0,i.Wm)(u,{users:e.profile.followers,toShow:"follower",isMe:e.profile.isMyProfile},null,8,["users","isMe"])]),(0,i._)("div",Yo,[(0,i.Wm)(u,{users:e.profile.followers,toShow:"following",isMe:e.profile.isMyProfile},null,8,["users","isMe"])])])])])])])])])):((0,i.wg)(),(0,i.iD)("div",Ko,Qo))])):((0,i.wg)(),(0,i.iD)("div",Xo,tl))}const al=e=>((0,i.dD)("data-v-65587df2"),e=e(),(0,i.Cn)(),e),il={class:"card"},ol={class:"card-body"},ll={class:"row"},nl={class:"col-md-12 ps-4"},rl={class:"tab-content"},cl=al((()=>(0,i._)("h4",{class:"mt-3"},"Personal Information",-1))),dl=al((()=>(0,i._)("hr",null,null,-1))),ul={class:"row"},pl={class:"row"},ml=al((()=>(0,i._)("div",{class:"col-3"},[(0,i._)("h6",null,"First Name")],-1))),gl={class:"col-9"},hl={class:"row"},vl=al((()=>(0,i._)("div",{class:"col-3"},[(0,i._)("h6",null,"Last Name")],-1))),fl={class:"col-9"},wl={class:"row"},bl=al((()=>(0,i._)("div",{class:"col-3"},[(0,i._)("h6",null,"Birth Date")],-1))),_l={class:"col-9"},yl={class:"row"},kl=al((()=>(0,i._)("div",{class:"col-3"},[(0,i._)("h6",null,"Nickname")],-1))),Dl={class:"col-9"},xl={key:0},Cl={key:1,style:{"font-style":"italic"}},Il=al((()=>(0,i._)("h4",{class:"mt-3"},"Contact Information",-1))),ql=al((()=>(0,i._)("hr",null,null,-1))),Sl={class:"row"},Pl=al((()=>(0,i._)("div",{class:"col-3"},[(0,i._)("h6",null,"Email")],-1))),El={class:"col-9"},Ml=al((()=>(0,i._)("h4",{class:"mt-3"},"About me",-1))),Al=al((()=>(0,i._)("hr",null,null,-1))),Ul={class:"row"},Tl={class:"row"},jl={class:"col-12"},Nl={key:0},Ol={key:1,style:{"font-style":"italic"}};function Rl(e,t,s,a,o,l){return(0,i.wg)(),(0,i.iD)("div",il,[(0,i._)("div",ol,[(0,i._)("div",ll,[(0,i._)("div",nl,[(0,i._)("div",rl,[(0,i._)("div",null,[(0,i._)("div",null,[cl,dl,(0,i._)("div",ul,[(0,i._)("div",pl,[ml,(0,i._)("div",gl,[(0,i._)("p",null,(0,x.zw)(s.info.firstName),1)])]),(0,i._)("div",hl,[vl,(0,i._)("div",fl,[(0,i._)("p",null,(0,x.zw)(s.info.lastName),1)])]),(0,i._)("div",wl,[bl,(0,i._)("div",_l,[(0,i._)("p",null,(0,x.zw)(s.info.birthDate),1)])]),(0,i._)("div",yl,[kl,(0,i._)("div",Dl,[s.info.nickname?((0,i.wg)(),(0,i.iD)("p",xl,(0,x.zw)(s.info.nickname),1)):((0,i.wg)(),(0,i.iD)("p",Cl,"Unknown"))])])])]),(0,i._)("div",null,[Il,ql,(0,i._)("div",Sl,[Pl,(0,i._)("div",El,[(0,i._)("p",null,(0,x.zw)(s.info.email),1)])])]),(0,i._)("div",null,[Ml,Al,(0,i._)("div",Ul,[(0,i._)("div",Tl,[(0,i._)("div",jl,[s.info.aboutMe?((0,i.wg)(),(0,i.iD)("p",Nl,(0,x.zw)(s.info.aboutMe),1)):((0,i.wg)(),(0,i.iD)("p",Ol,"Unknown"))])])])])])])])])])])}var zl={name:"AboutInfo",props:{info:{type:Object}},data:()=>({})};const $l=(0,se.Z)(zl,[["render",Rl],["__scopeId","data-v-65587df2"]]);var Fl=$l;const Gl={class:"card-body p-0"},Bl={key:0,class:"row"},Zl={class:"iq-friendlist-block"},Wl={class:"d-flex align-items-center justify-content-between"},Ll={class:"d-flex align-items-center"},Vl=["src"],Hl={class:"friend-info ms-3"},Yl={class:"mb-0"},Kl={class:"card-header-toolbar d-flex align-items-center"},Jl={key:0,class:"dropdown"},Ql={key:0},Xl=(0,i._)("span",{class:"dropdown-toggle btn btn-secondary me-2",id:"followerButton","data-bs-toggle":"dropdown","aria-expanded":"false",role:"button"},[(0,i._)("i",{class:"ri-check-line me-1 text-white"}),(0,i.Uk)(" Follower ")],-1),en={class:"dropdown-menu dropdown-menu-right","aria-labelledby":"followerButton",style:{}},tn=["onClick"],sn={key:1},an=(0,i._)("span",{class:"dropdown-toggle btn btn-secondary me-2",id:"followingButton","data-bs-toggle":"dropdown","aria-expanded":"false",role:"button"},[(0,i._)("i",{class:"ri-check-line me-1 text-white"}),(0,i.Uk)(" Following ")],-1),on={class:"dropdown-menu dropdown-menu-right","aria-labelledby":"followingButton",style:{}},ln=["onClick"],nn={key:1},rn={key:0,class:"me-3"},cn={key:1,class:"me-3"},dn={key:1};function un(e,t,s,a,o,l){const n=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",Gl,[s.users?((0,i.wg)(),(0,i.iD)("div",Bl,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.mutableUsers.filter(l.filterFunc(s.toShow)),(e=>((0,i.wg)(),(0,i.iD)("div",{key:e.id,class:"col-md-6 col-lg-6 mb-3"},[(0,i._)("div",Zl,[(0,i._)("div",Wl,[(0,i._)("div",Ll,[(0,i.Wm)(n,{to:"/user/"+e.id},{default:(0,i.w5)((()=>[(0,i._)("img",{src:e.avatar,alt:"profile-img",class:"avatar-130 img-fluid"},null,8,Vl)])),_:2},1032,["to"]),(0,i._)("div",Hl,[(0,i._)("h5",null,(0,x.zw)(e.firstName)+" "+(0,x.zw)(e.lastName),1),(0,i._)("p",Yl,(0,x.zw)(e.totalFollowers)+" followers",1)])]),(0,i._)("div",Kl,[s.isMe?((0,i.wg)(),(0,i.iD)("div",Jl,["follower"===e.type?((0,i.wg)(),(0,i.iD)("div",Ql,[Xl,(0,i._)("div",en,[(0,i._)("a",{class:"dropdown-item btn",onClick:t=>l.remove(e.id)},"Remove",8,tn)])])):((0,i.wg)(),(0,i.iD)("div",sn,[an,(0,i._)("div",on,[(0,i._)("a",{class:"dropdown-item btn",onClick:t=>l.unfollow(e.id)},"Unfollow",8,ln)])]))])):((0,i.wg)(),(0,i.iD)("div",nn,["follower"===e.type?((0,i.wg)(),(0,i.iD)("div",rn," Follower ")):((0,i.wg)(),(0,i.iD)("div",cn," Following "))]))])])])])))),128))])):((0,i.wg)(),(0,i.iD)("div",dn," This user don't have any followers or follows "))])}var pn={name:"UserList",props:{toShow:{type:String,default:"all"},users:{type:Array,default:()=>[]},isMe:{type:Boolean}},data(){return{mutableUsers:this.users}},methods:{filterFunc(e){return function(t){return t.type===e||"all"===e}},async remove(e){let t=await ee().get("api/profile/removefollow",{params:{id:e},withCredentials:!0});this.parseResponse(t,e)},async unfollow(e){let t=await ee().get("api/profile/unfollow",{params:{id:e},withCredentials:!0});this.parseResponse(t,e)},parseResponse(e,t){!1!==e.data.ok?(this.$toast.open({message:e.data.message,type:"success"}),this.updateUsers(t)):this.$toast.open({message:e.data.message,type:"error"})},updateUsers(e){for(let t=0;t<this.mutableUsers.length;t++)if(this.mutableUsers[t].id===e){this.mutableUsers.splice(t,1);break}}}};const mn=(0,se.Z)(pn,[["render",un]]);var gn=mn,hn={name:"UserProfile",components:{CreatePost:Ts,PostContent:za,AboutInfo:Fl,UserList:gn},data:()=>({profile:{},postsToShow:5}),props:{userId:{type:String,default:""}},watch:{userId:{handler(){this.fetchUserProfile()}}},computed:{...(0,Q.Se)({getAvatar:"auth/avatar"}),showPosts(){return this.profile.posts.slice(0,this.postsToShow)}},created(){this.fetchUserProfile()},methods:{async fetchUserProfile(){let e=await ee().get("api/profile/fetchProfile",{params:{id:this.userId},withCredentials:!0});!1!==e.data.ok?this.profile=e.data:console.log("Not found")},async follow(){let e=await ee().get("api/profile/follow",{params:{id:this.userId},withCredentials:!0});this.parseResponse(e),!0===e.data.ok&&(this.profile.following=!0)},async unfollow(){let e=await ee().get("api/profile/unfollow",{params:{id:this.userId},withCredentials:!0});this.parseResponse(e),!0===e.data.ok&&(this.profile.following=!1)},async requestToFollow(){let e=await ee().get("api/profile/requesttofollow",{params:{id:this.userId},withCredentials:!0});this.parseResponse(e),!0===e.data.ok&&this.$socket.send(JSON.stringify({dest:parseInt(this.userId),type:"followRequest"}))},parseResponse(e){!1!==e.data.ok?this.$toast.open({message:e.data.message,type:"success"}):this.$toast.open({message:e.data.message,type:"error"})}}};const vn=(0,se.Z)(hn,[["render",sl]]);var fn=vn,wn=(0,i.aZ)({name:"ProfileView",props:{userId:{type:String,default:""}},components:{UserProfile:fn}});const bn=(0,se.Z)(wn,[["render",io]]);var _n=bn;function yn(e,t,s,a,o,l){const n=(0,i.up)("ProfileSettings");return(0,i.wg)(),(0,i.j4)(n)}const kn={class:"col-lg-12"},Dn={class:"iq-edit-list-data"},xn={class:"card"},Cn=(0,i._)("div",{class:"card-header d-flex justify-content-between"},[(0,i._)("div",{class:"header-title"},[(0,i._)("h4",{class:"card-title"},"Personal Information Settings")])],-1),In={class:"card-body"},qn={class:"form-group row align-items-center text-center"},Sn={class:"col-md-12"},Pn={class:"profile-img-edit"},En=["src"],Mn={class:"p-image"},An=(0,i._)("label",{for:"new-image",style:{width:"inherit",cursor:"pointer"}},[(0,i._)("i",{class:"ri-pencil-line upload-button text-white"})],-1),Un={class:"row align-items-center"},Tn={class:"form-group col-sm-6"},jn=(0,i._)("label",{class:"form-label"},"First Name",-1),Nn={class:"form-group col-sm-6"},On=(0,i._)("label",{class:"form-label"},"Last Name",-1),Rn={class:"form-group col-sm-6"},zn=(0,i._)("label",{class:"form-label"},"Date of Birth",-1),$n={class:"form-group col-sm-6"},Fn=(0,i._)("label",{class:"form-label"},"Email",-1),Gn={class:"form-group col-sm-6"},Bn=(0,i._)("label",{class:"form-label"},"Nickname",-1),Zn={class:"form-group"},Wn=(0,i._)("label",{class:"form-label"},"About me:",-1),Ln=["disabled"];function Vn(e,t,s,o,l,n){return(0,i.wg)(),(0,i.iD)("div",kn,[(0,i._)("div",Dn,[(0,i._)("div",xn,[Cn,(0,i._)("div",In,[(0,i._)("form",null,[(0,i._)("div",qn,[(0,i._)("div",Sn,[(0,i._)("div",Pn,[(0,i._)("img",{class:"profile-pic rounded-circle",src:e.form.avatar,alt:"profile-pic"},null,8,En),(0,i._)("div",Mn,[An,(0,i._)("input",{type:"file",id:"new-image",accept:"image/png, image/gif, image/jpeg",ref:"avatar-input",onChange:t[0]||(t[0]=(...e)=>n.updateAvatar&&n.updateAvatar(...e)),style:{display:"none"}},null,544)])])])]),(0,i._)("div",Un,[(0,i._)("div",Tn,[jn,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[1]||(t[1]=t=>e.form.firstName=t),type:"text",class:"form-control",placeholder:"First Name",disabled:""},null,512),[[a.nr,e.form.firstName]])]),(0,i._)("div",Nn,[On,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[2]||(t[2]=t=>e.form.lastName=t),type:"text",class:"form-control",placeholder:"Last Name",disabled:""},null,512),[[a.nr,e.form.lastName]])]),(0,i._)("div",Rn,[zn,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[3]||(t[3]=t=>e.form.birthDate=t),type:"date",class:"form-control",placeholder:"Date of Birth",disabled:""},null,512),[[a.nr,e.form.birthDate]])]),(0,i._)("div",$n,[Fn,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[4]||(t[4]=t=>e.form.email=t),type:"text",class:"form-control",placeholder:"Email",disabled:""},null,512),[[a.nr,e.form.email]])]),(0,i._)("div",Gn,[Bn,(0,i.wy)((0,i._)("input",{minlength:"4","onUpdate:modelValue":t[5]||(t[5]=t=>e.inputs.nickname=t),type:"text",class:"form-control",placeholder:"Nickname"},null,512),[[a.nr,e.inputs.nickname]])]),(0,i._)("div",Zn,[Wn,(0,i.wy)((0,i._)("textarea",{"onUpdate:modelValue":t[6]||(t[6]=t=>e.inputs.aboutMe=t),class:"form-control",name:"aboutMe",rows:"5",style:{"line-height":"22px",resize:"none"},placeholder:"About me"},null,512),[[a.nr,e.inputs.aboutMe]])])]),(0,i._)("button",{type:"submit",class:"btn btn-primary me-2",onClick:t[7]||(t[7]=(0,a.iM)(((...e)=>n.updateData&&n.updateData(...e)),["prevent"])),disabled:!e.submit},"Update",8,Ln)])])])])])}var Hn={name:"ProfileSettings",data:()=>({form:{fistName:"",lastName:"",email:"",nickname:"",aboutMe:"",birthDate:"",avatar:""},inputs:{aboutMe:"",nickname:""},submit:!1}),watch:{inputs:{handler(e){for(const[t,s]of Object.entries(e)){if(this.form[t]!=s){this.submit=!0;break}this.submit=!1}},deep:!0}},created(){this.form=this.getUser(),this.inputs.aboutMe=this.form.aboutMe,this.inputs.nickname=this.form.nickname},methods:{...(0,Q.Se)({getUser:"auth/user"}),...(0,Q.OI)({updateUser:"auth/UPDATE_USER"}),async updateAvatar(e){var t=e.target.files||e.dataTransfer.files;if(!t.length)return;const s=t[0],[a]=s.type.split("/");if("image"!=a)return void this.$toast.open({message:"Only images allowed to upload!",type:"error"});if(s.size>2048e3)return void this.$toast.open({message:"Image size must be less than 2 MB!",type:"error"});let i=await ee().post("api/settings/updateAvatar",{avatar:s},{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0});const o=i.data;!1!==o.ok?(this.updateUser({type:"avatar",data:i.data.data}),this.$toast.open({message:"Profile picture successfully updated!",type:"success"})):this.$toast.open({message:o.message,type:"error"})},async updateData(){let e=await ee().post("api/settings/updateProfile",this.inputs,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0});!0===e.data.ok&&(this.$toast.open({message:e.data.message,type:"success"}),this.form.aboutMe=this.inputs.aboutMe,this.form.nickname=this.inputs.nickname,this.submit=!1,this.updateUser({type:"nickname",data:this.inputs.nickname}),this.updateUser({type:"aboutMe",data:this.inputs.aboutMe}))}}};const Yn=(0,se.Z)(Hn,[["render",Vn]]);var Kn=Yn,Jn={name:"EditProfileView",components:{ProfileSettings:Kn}};const Qn=(0,se.Z)(Jn,[["render",yn]]);var Xn=Qn;function er(e,t,s,a,o,l){const n=(0,i.up)("PrivacySettings");return(0,i.wg)(),(0,i.j4)(n)}const tr={class:"col-lg-12"},sr={class:"card"},ar=(0,i._)("div",{class:"card-header d-flex justify-content-between"},[(0,i._)("div",{class:"header-title"},[(0,i._)("h4",{class:"card-title"},"Privacy Setting")])],-1),ir={class:"card-body"},or={class:"acc-privacy"},lr={class:"data-privacy"},nr=(0,i._)("h4",{class:"mb-2"},"Account Privacy",-1),rr={class:"form-check form-check-inline"},cr=(0,i._)("label",{class:"form-check-label privacy-status mb-2",for:"acc-private"},"Private Account",-1),dr=(0,i._)("p",null," Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book ",-1),ur=["disabled"];function pr(e,t,s,o,l,n){return(0,i.wg)(),(0,i.iD)("div",tr,[(0,i._)("div",sr,[ar,(0,i._)("div",ir,[(0,i._)("div",or,[(0,i._)("div",lr,[nr,(0,i._)("div",rr,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.accountPrivate=e),type:"checkbox",class:"form-check-input",id:"acc-private"},null,512),[[a.e8,l.accountPrivate]]),cr]),dr]),(0,i._)("button",{type:"submit",class:"btn btn-primary me-2",onClick:t[1]||(t[1]=(0,a.iM)(((...e)=>n.updatePrivate&&n.updatePrivate(...e)),["prevent"])),disabled:l.submit},"Update",8,ur)])])])])}var mr={data(){return{accountPrivate:!1,submit:!0}},name:"PrivacySettings",created(){const e=this.getUser();this.accountPrivate=e.private,this.submit=!0},watch:{accountPrivate:{handler(){this.submit=!this.submit}}},methods:{...(0,Q.Se)({getUser:"auth/user"}),...(0,Q.OI)({updateUser:"auth/UPDATE_USER"}),async updatePrivate(){let e=await ee().post("api/settings/updatePrivacy",{private:this.accountPrivate},{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0});!0===e.data.ok&&(this.$toast.open({message:e.data.message,type:"success"}),this.updateUser({type:"private",data:this.accountPrivate}),this.submit=!this.submit)}}};const gr=(0,se.Z)(mr,[["render",pr]]);var hr=gr,vr={name:"EditPrivacyView",components:{PrivacySettings:hr}};const fr=(0,se.Z)(vr,[["render",er]]);var wr=fr;function br(e,t,s,a,o,l){const n=(0,i.up)("RequestsFeed");return(0,i.wg)(),(0,i.j4)(n)}const _r={class:"card"},yr=(0,i._)("div",{class:"card-header d-flex justify-content-between"},[(0,i._)("div",{class:"header-title"},[(0,i._)("h4",{class:"card-title"},"Follow Requests")])],-1),kr={class:"card-body"},Dr={class:"request-list list-inline m-0 p-0"},xr={key:0,class:"d-block text-center mb-0 pb-0"},Cr=(0,i._)("p",{class:"me-3 mb-0"},"You don't have any request",-1),Ir=[Cr];function qr(e,t,s,a,o,l){const n=(0,i.up)("FollowRequest");return(0,i.wg)(),(0,i.iD)("div",_r,[yr,(0,i._)("div",kr,[(0,i._)("ul",Dr,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.getRequests,((e,t)=>((0,i.wg)(),(0,i.iD)("li",{key:t,class:"d-flex align-items-center flex-wrap"},[(0,i.Wm)(n,{request:e,index:t},null,8,["request","index"])])))),128)),0===e.getRequests.length?((0,i.wg)(),(0,i.iD)("li",xr,Ir)):(0,i.kq)("",!0)])])])}var Sr={name:"RequestsFeed",components:{FollowRequest:ie},computed:{...(0,Q.Se)({getRequests:"requests"})}};const Pr=(0,se.Z)(Sr,[["render",qr]]);var Er=Pr,Mr={name:"FollowRequestView",components:{RequestsFeed:Er}};const Ar=(0,se.Z)(Mr,[["render",br]]);var Ur=Ar;function Tr(e,t,s,a,o,l){const n=(0,i.up)("ChatBase");return(0,i.wg)(),(0,i.j4)(n,{chatId:s.chatId},null,8,["chatId"])}const jr={class:"card"},Nr={class:"card-body chat-page p-0"},Or={class:"chat-data-block"},Rr={class:"row"},zr={class:"col-lg-3 chat-data-left scroller"},$r={class:"col-lg-9 chat-data p-0 chat-data-right"};function Fr(e,t,s,a,o,l){const n=(0,i.up)("ChatSideBar"),r=(0,i.up)("ChatBox");return(0,i.wg)(),(0,i.iD)("div",jr,[(0,i._)("div",Nr,[(0,i._)("div",Or,[(0,i._)("div",Rr,[(0,i._)("div",zr,[(0,i.Wm)(n,{chats:l.chatOverviews,callback:l.changeChat},null,8,["chats","callback"])]),(0,i._)("div",$r,[(0,i.Wm)(r,{chat:e.chats[e.currentChat],onNewMessage:l.newMessage},null,8,["chat","onNewMessage"])])])])])])}const Gr={class:"chat-sidebar-channel scroller mt-4 ps-2"},Br={class:"iq-chat-ui nav flex-column nav-pills"},Zr=(0,i._)("h5",{class:""},"Group Chats",-1),Wr=["onClick"],Lr={key:0,class:"text-center m-0 px-1"},Vr=(0,i._)("h5",{class:"mt-3"},"Direct Messages",-1),Hr=["onClick"],Yr={key:1,class:"text-center m-0 px-1"};function Kr(e,t,s,a,o,l){const n=(0,i.up)("ChatOverview");return(0,i.wg)(),(0,i.iD)("div",Gr,[(0,i._)("ul",Br,[Zr,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(s.chats.filter((e=>e.type)),(e=>((0,i.wg)(),(0,i.iD)("li",{key:e.id,onClick:t=>s.callback(e.id),class:"link-anchor"},[(0,i.Wm)(n,{chat:e},null,8,["chat"])],8,Wr)))),128)),0===s.chats.filter((e=>e.type)).length?((0,i.wg)(),(0,i.iD)("p",Lr,"You don't have any group chats")):(0,i.kq)("",!0),Vr,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(s.chats.filter((e=>!e.type)),(e=>((0,i.wg)(),(0,i.iD)("li",{key:e.id,onClick:t=>s.callback(e.id),class:"link-anchor"},[(0,i.Wm)(n,{chat:e},null,8,["chat"])],8,Hr)))),128)),0===s.chats.filter((e=>!e.type)).length?((0,i.wg)(),(0,i.iD)("p",Yr,"You don't have any direct messages")):(0,i.kq)("",!0)])])}const Jr={"data-bs-toggle":"pill",class:""},Qr={class:"d-flex align-items-center"},Xr={class:"avatar me-2"},ec=["src"],tc={class:"chat-sidebar-name"},sc={class:"mb-0"};function ac(e,t,s,a,o,l){return(0,i.wg)(),(0,i.iD)("a",Jr,[(0,i._)("div",Qr,[(0,i._)("div",Xr,[(0,i._)("img",{src:s.chat.avatar,alt:"chatuserimage",class:"avatar-50 profile-pic rounded-circle"},null,8,ec)]),(0,i._)("div",tc,[(0,i._)("h6",sc,(0,x.zw)(s.chat.name),1),(0,i._)("span",null,(0,x.zw)(s.chat.lastMessageContent),1)])])])}var ic={name:"ChatOverview",props:{chat:{type:Object,default:()=>({})}}};const oc=(0,se.Z)(ic,[["render",ac]]);var lc=oc,nc={name:"ChatSideBar",props:{callback:{type:Function,default:()=>"-1"},chats:{type:Array}},components:{ChatOverview:lc},data:()=>({})};const rc=(0,se.Z)(nc,[["render",Kr]]);var cc=rc;const dc={key:0,class:"chat-start"},uc=(0,i._)("span",{class:"iq-start-icon text-primary"},[(0,i._)("i",{class:"ri-message-3-line"})],-1),pc=(0,i._)("p",{id:"chat-start",class:"btn bg-white mt-3"},"Open chat to start conversation!",-1),mc=[uc,pc],gc={key:1},hc={class:"chat-head"},vc={class:"d-flex justify-content-between align-items-center bg-white pt-3 ps-3 pe-3 pb-3"},fc={class:"d-flex align-items-center"},wc=(0,i._)("div",{class:"sidebar-toggle"},[(0,i._)("i",{class:"ri-menu-3-line"})],-1),bc={class:"avatar chat-user-profile m-0 me-3"},_c=["src"],yc={class:"mb-0"},kc={class:"chat-content scroller",id:"chat-scroll"},Dc={class:"chat-footer p-3 bg-white"},xc={class:"d-flex align-items-center",action:"#"},Cc={class:"chat-attagement d-flex"},Ic=(0,i._)("span",{class:"",id:"followerButton","data-bs-toggle":"dropdown","aria-expanded":"false",role:"button"},[(0,i._)("i",{class:"las la-smile pe-3","aria-hidden":"true"})],-1),qc={class:"dropdown-menu dropdown-menu-start","aria-labelledby":"followerButton",style:{}},Sc=(0,i._)("i",{class:"lab la-telegram-plane","aria-hidden":"true"},null,-1),Pc=(0,i._)("span",{class:"d-none d-lg-block ms-1"},"Send",-1),Ec=[Sc,Pc];function Mc(e,t,s,o,l,n){const r=(0,i.up)("ChatMessage"),c=(0,i.up)("Picker");return s.chat.id?((0,i.wg)(),(0,i.iD)("div",gc,[(0,i._)("div",hc,[(0,i._)("header",vc,[(0,i._)("div",fc,[wc,(0,i._)("div",bc,[(0,i._)("img",{src:s.chat.avatar,alt:"avatar",class:"avatar-50 profile-pic rounded-circle"},null,8,_c)]),(0,i._)("h5",yc,(0,x.zw)(s.chat.name),1)])])]),(0,i._)("div",kc,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(s.chat.messages,((t,s)=>((0,i.wg)(),(0,i.iD)("div",{key:s,class:(0,x.C_)([t.author!==e.getId()?"chat-left":"other-user","chat d-flex mb-2"])},[(0,i.Wm)(r,{message:t,avatar:t.author!==e.getId()?t.profilePicture:e.getAvatar()},null,8,["message","avatar"])],2)))),128))]),(0,i._)("div",Dc,[(0,i._)("form",xc,[(0,i._)("div",Cc,[Ic,(0,i._)("div",qc,[(0,i.Wm)(c,{data:l.emojiIndex,showSearch:!1,showCategories:!1,showPreview:!1,showSkinTones:!1,onSelect:n.showEmoji},null,8,["data","onSelect"])])]),(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>l.inputMessage=e),class:"form-control me-3",placeholder:"Type your message"},null,512),[[a.nr,l.inputMessage]]),(0,i._)("button",{type:"submit",class:"btn btn-primary d-flex align-items-center p-2",onClick:t[1]||(t[1]=(0,a.iM)(((...e)=>n.submit&&n.submit(...e)),["prevent"]))},Ec)])])])):((0,i.wg)(),(0,i.iD)("div",dc,mc))}const Ac={class:"chat-user"},Uc={class:"avatar m-0"},Tc=["src"],jc={class:"mt-1 d-block"},Nc={class:"chat-detail"},Oc={class:"chat-message"},Rc={class:"pb-3"},zc={class:"chat-time mt-2",style:{display:"contents"}};function $c(e,t,s,a,o,l){return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("div",Ac,[(0,i._)("a",Uc,[(0,i._)("img",{src:s.avatar,alt:"avatar",class:"avatar-35 profile-pic rounded-circle"},null,8,Tc)]),(0,i._)("span",jc,(0,x.zw)(s.message.authorName),1)]),(0,i._)("div",Nc,[(0,i._)("div",Oc,[(0,i._)("p",Rc,(0,x.zw)(s.message.text),1),(0,i._)("span",zc,(0,x.zw)(l.time),1)])])],64)}var Fc={name:"ChatMessage",props:{message:{type:Object,default:()=>({})},avatar:{type:String}},computed:{time(){return Qm(this.message.time)}}};const Gc=(0,se.Z)(Fc,[["render",$c]]);var Bc=Gc,Zc=s(2859),Wc=s(3616);let Lc=new Wc.xd(Zc);var Vc={name:"ChatBox",props:{chat:{type:Object,default:()=>({})}},components:{Picker:Wc.cW,ChatMessage:Bc},data(){return{inputMessage:"",emojiIndex:Lc}},watch:{"chat.id":{handler(){this.$nextTick((function(){const e=document.getElementById("chat-scroll");e.scrollTop=e.scrollHeight}))}},"chat.messages":{handler(){this.$nextTick((function(){const e=document.getElementById("chat-scroll");e.scrollHeight-e.scrollTop-200<e.clientHeight&&(e.scrollTop=e.scrollHeight)}))},deep:!0}},methods:{...(0,Q.Se)({getId:"auth/id",getAvatar:"auth/avatar"}),showEmoji(e){this.inputMessage+=e.native},async submit(){let e=await ee().post("api/chat/submit",{id:this.chat.id,message:this.inputMessage},{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0});!0===e.data.ok&&(this.$emit("newMessage",this.inputMessage),this.inputMessage="")}}};const Hc=(0,se.Z)(Vc,[["render",Mc]]);var Yc=Hc,Kc={name:"ChatBase",components:{ChatSideBar:cc,ChatBox:Yc},props:{chatId:{type:String,default:"0"}},data:()=>({currentChat:null,chats:{}}),watch:{"$store.state.message":{handler(e){this.chats[e.chatId].messages.push(e)},deep:!0}},computed:{chatOverviews(){let e=[];for(const[t,s]of Object.entries(this.chats))e.push({id:s.id,name:s.name,type:s.isGroupChat,avatar:s.avatar,lastMessageContent:0==s.messages.length?"":s.messages[s.messages.length-1].text.slice(0,10)+"..."});return e}},async created(){let e=await ee().get("api/allchats",{withCredentials:!0});if(e.data){let t={};e.data.forEach((e=>{t[e.id]=e,null===e.messages&&(t[e.id].messages=[])})),this.chats=t}},mounted(){this.currentChat=this.chatId},methods:{...(0,Q.Se)({getId:"auth/id"}),changeChat(e){this.currentChat=e},newMessage(e){this.$socket.send(JSON.stringify({isGroupChat:this.chats[this.currentChat].isGroupChat,chatId:this.currentChat,authorId:this.getId(),sub:e,dest:this.chats[this.currentChat].destId,type:"newMessage"})),this.addMessage(this.getId(),e)},addMessage(e,t){this.chats[this.currentChat].messages.push({author:e,time:new Date(Date.now()).toISOString(),text:t})}}};const Jc=(0,se.Z)(Kc,[["render",Fr]]);var Qc=Jc,Xc={name:"ChatView",props:{chatId:{type:String,default:"0"}},components:{ChatBase:Qc}};const ed=(0,se.Z)(Xc,[["render",Tr]]);var td=ed;function sd(e,t,s,a,o,l){const n=(0,i.up)("GroupsFeed");return(0,i.wg)(),(0,i.j4)(n)}const ad={class:"iq-search-bar device-search d-flex justify-content-center mb-3 gap-5"},id={action:"#",class:"searchbox"},od=(0,i._)("a",{class:"search-link h-100 d-flex align-items-center",href:"#"},[(0,i._)("i",{class:"ri-search-line"})],-1),ld={class:"d-grid gap-3 d-grid-template-1fr-19"},nd={key:0,class:"text-center mb-0"};function rd(e,t,s,o,l,n){const r=(0,i.up)("NewGroupModal"),c=(0,i.up)("GroupOverview");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("div",ad,[(0,i._)("form",id,[od,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.search=t),type:"text",class:"text search-input",placeholder:"Search group here..."},null,512),[[a.nr,e.search]])]),(0,i._)("button",{class:"btn btn-primary d-block",onClick:t[1]||(t[1]=(...e)=>n.openModal&&n.openModal(...e))},"Create Group")]),(0,i.Wm)(r,{modalId:"newGroupModal",onCloseModal:n.closeModal},null,8,["onCloseModal"]),(0,i._)("div",ld,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.filteredGroups,(e=>((0,i.wg)(),(0,i.iD)("div",{key:e.id,class:"card"},[(0,i.Wm)(c,{group:e},null,8,["group"])])))),128))]),0===n.filteredGroups.length?((0,i.wg)(),(0,i.iD)("h4",nd,"Group not found")):(0,i.kq)("",!0)],64)}s(6699);const cd={class:"card-body text-center"},dd=["src"],ud={class:"group-info pt-3 pb-3"},pd={class:"group-details d-inline-block pb-3"},md={class:"d-flex align-items-center justify-content-between list-inline m-0 p-0"},gd={class:"pe-3 ps-3"},hd=(0,i._)("p",{class:"mb-0"},"Posts",-1),vd={class:"pe-3 ps-3"},fd=(0,i._)("p",{class:"mb-0"},"Members",-1),wd={class:"pe-3 ps-3"},bd=(0,i._)("p",{class:"mb-0"},"Type",-1),_d=(0,i.Uk)("Explore");function yd(e,t,s,a,o,l){const n=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",cd,[(0,i._)("div",null,[(0,i._)("img",{src:s.group.picture,alt:"profile-img",class:"rounded-circle img-fluid avatar-120"},null,8,dd)]),(0,i._)("div",ud,[(0,i._)("h4",null,[(0,i.Wm)(n,{to:"/group/"+s.group.id},{default:(0,i.w5)((()=>[(0,i.Uk)((0,x.zw)(s.group.title),1)])),_:1},8,["to"])])]),(0,i._)("div",pd,[(0,i._)("ul",md,[(0,i._)("li",gd,[hd,(0,i._)("h6",null,(0,x.zw)(s.group.totalPosts),1)]),(0,i._)("li",vd,[fd,(0,i._)("h6",null,(0,x.zw)(s.group.totalFollowers),1)]),(0,i._)("li",wd,[bd,(0,i._)("h6",null,(0,x.zw)(s.group.private?"Private":"Public"),1)])])]),(0,i.Wm)(n,{class:"btn btn-primary d-block w-100",to:"/group/"+s.group.id},{default:(0,i.w5)((()=>[_d])),_:1},8,["to"])])}var kd={name:"GroupOverview",props:{group:{type:Object,default:()=>({})}}};const Dd=(0,se.Z)(kd,[["render",yd]]);var xd=Dd;const Cd=e=>((0,i.dD)("data-v-9c39c810"),e=e(),(0,i.Cn)(),e),Id=["id"],qd={class:"modal-dialog"},Sd={class:"modal-content"},Pd=Cd((()=>(0,i._)("div",{class:"modal-header"},[(0,i._)("h5",{class:"modal-title",id:"modalLabel"},"Create Group"),(0,i._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},[(0,i._)("i",{class:"ri-close-line"})])],-1))),Ed={class:"modal-body"},Md={class:"d-flex justify-content-center"},Ad={class:"profile-img-edit"},Ud=["src"],Td={class:"p-image"},jd=Cd((()=>(0,i._)("label",{for:"new-image",style:{width:"inherit",cursor:"pointer"}},[(0,i._)("i",{class:"ri-pencil-line upload-button text-white"})],-1))),Nd=Cd((()=>(0,i._)("hr",null,null,-1))),Od={class:"d-flex align-items-center justify-content-between mb-2"},Rd=Cd((()=>(0,i._)("h6",{class:""},"Title:",-1))),zd=Cd((()=>(0,i._)("hr",null,null,-1))),$d={class:"d-flex align-items-center justify-content-between mb-2"},Fd=Cd((()=>(0,i._)("h6",{class:""},"Description:",-1))),Gd=Cd((()=>(0,i._)("hr",null,null,-1))),Bd={class:"share-option"},Zd={class:"d-flex align-items-center justify-content-between"},Wd=Cd((()=>(0,i._)("div",{class:"d-flex align-items-center"},[(0,i._)("h6",null,"Choose the privacy of the group")],-1))),Ld={class:"card-post-toolbar"},Vd={class:"dropdown"},Hd={class:"dropdown-toggle","data-bs-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",role:"button"},Yd={class:"btn btn-primary"},Kd={class:"dropdown-menu mt-2 m-0 p-0"},Jd=["onClick"],Qd={class:"d-flex align-items-top"},Xd={class:"data ms-2"},eu={class:"mb-0"},tu=Cd((()=>(0,i._)("hr",null,null,-1))),su={class:"share-option"},au={class:"d-flex align-items-center justify-content-between"},iu=Cd((()=>(0,i._)("div",{class:"d-flex align-items-center"},[(0,i._)("h6",null,"Choose the followers to invite")],-1))),ou={class:"modal-footer justify-content-center"};function lu(e,t,s,o,l,n){const r=(0,i.up)("SelectionDropDown");return(0,i.wg)(),(0,i.iD)("div",{class:"modal fade",id:s.modalId,tabindex:"-1","aria-labelledby":"modalLabel","aria-hidden":"true",style:{overflow:"inherit"}},[(0,i._)("div",qd,[(0,i._)("div",Sd,[Pd,(0,i._)("div",Ed,[(0,i._)("div",Md,[(0,i._)("div",Ad,[(0,i._)("img",{class:"profile-pic rounded-circle",src:e.groupAvatarCreated?e.groupAvatarCreated:e.groupAvatarDefault,alt:"profile-pic"},null,8,Ud),(0,i._)("div",Td,[jd,(0,i._)("input",{type:"file",id:"new-image",accept:"image/png, image/gif, image/jpeg",ref:"avatar-input",onChange:t[0]||(t[0]=(...e)=>n.updatePicture&&n.updatePicture(...e)),style:{display:"none"}},null,544)])])]),Nd,(0,i._)("div",Od,[Rd,(0,i.wy)((0,i._)("input",{type:"text",class:"form-control w-75","onUpdate:modelValue":t[1]||(t[1]=t=>e.newGroup.title=t),placeholder:"Group title"},null,512),[[a.nr,e.newGroup.title]])]),zd,(0,i._)("div",$d,[Fd,(0,i.wy)((0,i._)("textarea",{id:"descriptionTextArea",type:"text",class:"form-control w-75","onUpdate:modelValue":t[2]||(t[2]=t=>e.newGroup.description=t),placeholder:"Group description",style:{resize:"none",height:"60px"}}," ",512),[[a.nr,e.newGroup.description]])]),Gd,(0,i._)("div",Bd,[(0,i._)("div",Zd,[Wd,(0,i._)("div",Ld,[(0,i._)("div",Vd,[(0,i._)("span",Hd,[(0,i._)("span",Yd,(0,x.zw)(n.setShareSettingType),1)]),(0,i._)("div",Kd,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.shareSettings,((t,s)=>((0,i.wg)(),(0,i.iD)("a",{key:t.type,class:"dropdown-item p-3",href:"#",onClick:t=>e.newGroup.currentShareSettings=s},[(0,i._)("div",Qd,[(0,i._)("i",{class:(0,x.C_)(["h4",t.icon])},null,2),(0,i._)("div",Xd,[(0,i._)("h6",null,(0,x.zw)(t.type),1),(0,i._)("p",eu,(0,x.zw)(t.sub),1)])])],8,Jd)))),128))])])])])]),tu,(0,i._)("div",su,[(0,i._)("div",au,[iu,(0,i.Wm)(r,{selectionAttr:e.selectionDD},null,8,["selectionAttr"])])])]),(0,i._)("div",ou,[(0,i._)("button",{type:"button",class:"col-4 btn btn-primary",onClick:t[3]||(t[3]=(...e)=>n.submit&&n.submit(...e))},"Create")])])])],8,Id)}var nu={name:"NewGroupModal",props:{modalId:{type:String,default:""}},components:{SelectionDropDown:Ss},data:()=>({groupAvatarDefault:"http://localhost:4000/images/default_avatar.png",groupAvatarCreated:"",newGroup:{groupAvatar:null,title:"",currentShareSettings:0,description:"",invites:[]},shareSettings:[{type:"Public",sub:"Anyone of network can join",icon:"ri-save-line"},{type:"Private",sub:"Join only with request or invite",icon:"ri-lock-line"}],selectionDD:{label:"Followers",elements:[]}}),async created(){let e=await ee().get("api/followers",{withCredentials:!0});e.data?this.selectionDD.elements=e.data:this.selectionDD.elements=[]},computed:{setShareSettingType(){return this.shareSettings[this.newGroup.currentShareSettings].type}},mounted(){const e=document.getElementById("descriptionTextArea"),t=120;e.oninput=function(){e.style.height="",e.style.height=Math.min(e.scrollHeight,t)+"px"}},methods:{async submit(){if(!this.newGroup.title)return void this.$toast.open({message:"Please fill group title!",type:"error"});if(!this.newGroup.description)return void this.$toast.open({message:"Please fill group description!",type:"error"});let e=this.selectionDD.elements.filter((e=>e.selected));this.newGroup.invites=JSON.stringify(e);let t=await ee().post("api/group/new",this.newGroup,{withCredentials:!0,headers:{"Content-Type":"multipart/form-data"}});!0===t.data.ok&&(this.$toast.open({message:t.data.message,type:"success"}),e.forEach((e=>{this.$socket.send(JSON.stringify({dest:e.id,groupName:this.newGroup.title,groupId:parseInt(t.data.data),type:"inviteRequest"}))})),this.$emit("closeModal"),this.$router.push("/group/"+t.data.data))},updatePicture(e){var t=e.target.files||e.dataTransfer.files;if(!t.length)return;const s=t[0],[a]=s.type.split("/");return"image"!=a?(this.$toast.open({message:"Only images allowed to upload!",type:"error"}),e.target.value=null,this.newGroup.groupAvatar=null,void(this.groupAvatarCreated="")):s.size>2048e3?(this.$toast.open({message:"Image size must be less than 2 MB!",type:"error"}),e.target.value=null,this.newGroup.groupAvatar=null,void(this.groupAvatarCreated="")):(this.newGroup.groupAvatar=s,void(this.groupAvatarCreated=URL.createObjectURL(this.newGroup.groupAvatar)))}}};const ru=(0,se.Z)(nu,[["render",lu],["__scopeId","data-v-9c39c810"]]);var cu=ru,du={name:"NewsFeed",components:{GroupOverview:xd,NewGroupModal:cu},data:()=>({search:"",modal:null,groups:[]}),computed:{filteredGroups(){return this.groups.filter((e=>e.title.toLowerCase().includes(this.search.toLowerCase())))}},async created(){let e=await ee().get("api/allgroups",{withCredentials:!0});null!==e.data&&(this.groups=e.data)},mounted(){this.modal=new(Mt().Modal)(document.getElementById("newGroupModal"))},methods:{openModal(){this.modal.show()},closeModal(){this.modal.hide()}}};const uu=(0,se.Z)(du,[["render",rd]]);var pu=uu,mu={name:"GroupsFeedView",components:{GroupsFeed:pu}};const gu=(0,se.Z)(mu,[["render",sd]]);var hu=gu;function vu(e,t,s,a,o,l){const n=(0,i.up)("GroupBase");return(0,i.wg)(),(0,i.j4)(n)}const fu={key:0},wu={class:"col-lg-12"},bu={key:0,class:"row p-0"},_u={class:"col-lg-8"},yu={class:"col-lg-4"},ku={key:1,class:"row p-0"},Du={class:"col-lg-8 d-flex align-items-center"},xu={key:0,class:"text-center"},Cu=(0,i._)("i",{class:"ri-lock-fill h2 me-3"},null,-1),Iu=(0,i.Uk)("Group is private. Make a request to join."),qu=[Cu,Iu],Su={key:1,class:"text-center"},Pu={class:"col-lg-4"},Eu={key:1,class:"text-center mb-0"};function Mu(e,t,s,a,o,l){const n=(0,i.up)("GroupHeader"),r=(0,i.up)("CreatePost"),c=(0,i.up)("PostContent"),d=(0,i.up)("router-link"),u=(0,i.up)("GroupAbout"),p=(0,i.up)("GroupEventsFeed");return(0,i.wg)(),(0,i.iD)(i.HY,null,[o.group.id?((0,i.wg)(),(0,i.iD)("div",fu,[(0,i._)("div",wu,[(0,i.Wm)(n,{onFollow:l.follow,onUnfollow:l.unfollow,onInvite:l.invite,group:o.group},null,8,["onFollow","onUnfollow","onInvite","group"])]),o.group.isFollowing?((0,i.wg)(),(0,i.iD)("div",bu,[(0,i._)("div",_u,[(0,i.Wm)(r,{groupPost:"",groupId:s.groupId},null,8,["groupId"]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.showPosts,(e=>((0,i.wg)(),(0,i.j4)(d,{key:e.post.id,to:"/post/"+e.post.id,style:{"text-decoration":"none",color:"inherit"}},{default:(0,i.w5)((()=>[(0,i.Wm)(c,{postData:e},null,8,["postData"])])),_:2},1032,["to"])))),128))]),(0,i._)("div",yu,[(0,i.Wm)(u,{group:o.group},null,8,["group"]),(0,i.Wm)(p,{groupId:s.groupId,events:l.showEvents},null,8,["groupId","events"])])])):(0,i.kq)("",!0),o.group.private&&!o.group.isFollowing||!o.group.isFollowing?((0,i.wg)(),(0,i.iD)("div",ku,[(0,i._)("div",Du,[o.group.private?((0,i.wg)(),(0,i.iD)("h2",xu,qu)):((0,i.wg)(),(0,i.iD)("h2",Su,"Follow the group to see what is inside"))]),(0,i._)("div",Pu,[(0,i.Wm)(u,{group:o.group},null,8,["group"])])])):(0,i.kq)("",!0)])):(0,i.kq)("",!0),!1===o.group.ok?((0,i.wg)(),(0,i.iD)("h2",Eu,"Group not found")):(0,i.kq)("",!0)],64)}const Au={class:"card"},Uu=(0,i._)("div",{class:"card-header d-flex justify-content-between"},[(0,i._)("div",{class:"header-title"},[(0,i._)("h4",{class:"card-title"},"Group events")])],-1),Tu={class:"card-body"},ju={class:"list-inline p-0 m-0"},Nu=(0,i._)("button",{type:"submit",class:"btn btn-primary d-block w-100","data-bs-toggle":"modal","data-bs-target":"#newEventModal"},[(0,i._)("i",{class:"ri-add-line pe-2"}),(0,i.Uk)("Create New Event")],-1);function Ou(e,t,s,a,o,l){const n=(0,i.up)("GroupEventOverview"),r=(0,i.up)("NewEventModal");return(0,i.wg)(),(0,i.iD)("div",Au,[Uu,(0,i._)("div",Tu,[(0,i._)("ul",ju,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(s.events,((e,t)=>((0,i.wg)(),(0,i.iD)("li",{key:"event"+t},[(0,i.Wm)(n,{event:e},null,8,["event"])])))),128)),(0,i._)("li",null,[Nu,(0,i.Wm)(r,{modalId:"newEventModal",groupId:s.groupId},null,8,["groupId"])])])])])}const Ru=["data-bs-target"],zu=["src"],$u={class:"mb-0"};function Fu(e,t,s,a,o,l){const n=(0,i.up)("GroupEventModal");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("div",{class:"mb-3 d-flex align-items-center gap-3 link-anchor","data-bs-toggle":"modal","data-bs-target":"#eventModal-"+s.event.id},[(0,i._)("img",{class:"rounded-circle img-fluid avatar-40",src:s.event.picture},null,8,zu),(0,i._)("h6",$u,(0,x.zw)(s.event.title),1)],8,Ru),(0,i.Wm)(n,{modalId:`eventModal-${s.event.id}`,event:s.event},null,8,["modalId","event"])],64)}const Gu=e=>((0,i.dD)("data-v-20068124"),e=e(),(0,i.Cn)(),e),Bu=["id"],Zu={class:"modal-dialog"},Wu={class:"modal-content"},Lu={class:"modal-header"},Vu={class:"modal-title",id:"modalLabel"},Hu=Gu((()=>(0,i._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},[(0,i._)("i",{class:"ri-close-line"})],-1))),Yu={class:"modal-body"},Ku={class:"d-flex justify-content-center"},Ju={class:"profile-img-edit"},Qu=["src"],Xu=Gu((()=>(0,i._)("hr",null,null,-1))),ep={class:"d-flex gap-2 mb-2"},tp=Gu((()=>(0,i._)("h6",{class:""},"Date:",-1))),sp={class:""},ap=Gu((()=>(0,i._)("hr",null,null,-1))),ip={class:"d-grid align-items-center gap-2 mb-2"},op=Gu((()=>(0,i._)("h6",{class:""},"Description:",-1))),lp={class:""},np=Gu((()=>(0,i._)("hr",null,null,-1))),rp={class:"d-flex justify-content-between"},cp={class:"d-flex gap-2"},dp=Gu((()=>(0,i._)("h6",{class:""},"Will participate:",-1))),up={class:""},pp={class:"d-flex gap-2"},mp=Gu((()=>(0,i._)("h6",{class:""},"Refused:",-1))),gp={class:""},hp={key:0,class:"modal-footer justify-content-center"},vp={key:1,class:"modal-footer justify-content-center"},fp={key:0},wp={key:1};function bp(e,t,s,a,o,l){return(0,i.wg)(),(0,i.iD)("div",{class:"modal fade",id:s.modalId,tabindex:"-1","aria-labelledby":"modalLabel","aria-hidden":"true",style:{overflow:"inherit"}},[(0,i._)("div",Zu,[(0,i._)("div",Wu,[(0,i._)("div",Lu,[(0,i._)("h5",Vu,(0,x.zw)(s.event.title),1),Hu]),(0,i._)("div",Yu,[(0,i._)("div",Ku,[(0,i._)("div",Ju,[(0,i._)("img",{class:"profile-pic rounded-circle",src:s.event.picture,alt:"profile-pic"},null,8,Qu)])]),Xu,(0,i._)("div",ep,[tp,(0,i._)("h6",sp,(0,x.zw)(s.event.date),1)]),ap,(0,i._)("div",ip,[op,(0,i._)("h6",lp,(0,x.zw)(s.event.description),1)]),np,(0,i._)("div",rp,[(0,i._)("div",cp,[dp,(0,i._)("h6",up,(0,x.zw)(l.countAccepters),1)]),(0,i._)("div",pp,[mp,(0,i._)("h6",gp,(0,x.zw)(l.countDecliners),1)])])]),l.checkParticipater?((0,i.wg)(),(0,i.iD)("div",vp,[l.atteningEvent?((0,i.wg)(),(0,i.iD)("h4",fp,"You are participating this event!")):((0,i.wg)(),(0,i.iD)("h4",wp,"You aren't participating this event!"))])):((0,i.wg)(),(0,i.iD)("div",hp,[(0,i._)("button",{type:"button",class:"col-4 btn btn-primary",onClick:t[0]||(t[0]=(...e)=>l.accept&&l.accept(...e))},"Will participate"),(0,i._)("button",{type:"button",class:"col-4 btn btn-primary",onClick:t[1]||(t[1]=(...e)=>l.refuse&&l.refuse(...e))},"Refuse")]))])])],8,Bu)}var _p={name:"GroupEventModal",props:{modalId:{type:String,default:""},event:{type:Object}},data:()=>({participants:[]}),created(){null!==this.event.participants&&(this.participants=this.event.participants)},computed:{countAccepters(){return this.participants.filter((e=>!0===e.willAttend&&e.eventId===this.event.id)).length},countDecliners(){return this.participants.filter((e=>!1===e.willAttend&&e.eventId===this.event.id)).length},checkParticipater(){return 0!=this.participants.filter((e=>e.participantId===this.getId()&&e.eventId===this.event.id)).length},atteningEvent(){return 0!=this.participants.filter((e=>e.participantId===this.getId()&&!0===e.willAttend&&e.eventId===this.event.id)).length}},methods:{...(0,Q.Se)({getId:"auth/id"}),async accept(){let e=await ee().get("api/event/accept",{params:{id:this.event.id},withCredentials:!0});this.parseResponse(e),!0===e.data.ok&&this.participants.push({eventId:this.event.id,participantId:this.getId(),willAttend:!0})},async refuse(){let e=await ee().get("api/event/decline",{params:{id:this.event.id},withCredentials:!0});this.parseResponse(e),!0===e.data.ok&&this.participants.push({eventId:this.event.id,participantId:this.getId(),willAttend:!1})},parseResponse(e){!1!==e.data.ok?this.$toast.open({message:e.data.message,type:"success"}):this.$toast.open({message:e.data.message,type:"error"})}}};const yp=(0,se.Z)(_p,[["render",bp],["__scopeId","data-v-20068124"]]);var kp=yp,Dp={name:"GroupEventOverview",components:{GroupEventModal:kp},props:{event:{type:Object}}};const xp=(0,se.Z)(Dp,[["render",Fu]]);var Cp=xp;const Ip=e=>((0,i.dD)("data-v-551c6aeb"),e=e(),(0,i.Cn)(),e),qp=["id"],Sp={class:"modal-dialog"},Pp={class:"modal-content"},Ep=Ip((()=>(0,i._)("div",{class:"modal-header"},[(0,i._)("h5",{class:"modal-title",id:"modalLabel"},"Create Event"),(0,i._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},[(0,i._)("i",{class:"ri-close-line"})])],-1))),Mp={class:"modal-body"},Ap={class:"d-flex justify-content-center"},Up={class:"profile-img-edit"},Tp=["src"],jp={class:"p-image"},Np=Ip((()=>(0,i._)("label",{for:"new-image",style:{width:"inherit",cursor:"pointer"}},[(0,i._)("i",{class:"ri-pencil-line upload-button text-white"})],-1))),Op=Ip((()=>(0,i._)("hr",null,null,-1))),Rp={class:"d-flex align-items-center justify-content-between mb-2"},zp=Ip((()=>(0,i._)("h6",{class:""},"Title:",-1))),$p=Ip((()=>(0,i._)("hr",null,null,-1))),Fp={class:"d-flex align-items-center justify-content-between mb-2"},Gp=Ip((()=>(0,i._)("h6",{class:""},"Date:",-1))),Bp=Ip((()=>(0,i._)("hr",null,null,-1))),Zp={class:"d-flex align-items-center justify-content-between mb-2"},Wp=Ip((()=>(0,i._)("h6",{class:""},"Description:",-1))),Lp={class:"modal-footer justify-content-center"};function Vp(e,t,s,o,l,n){return(0,i.wg)(),(0,i.iD)("div",{class:"modal fade",id:s.modalId,tabindex:"-1","aria-labelledby":"modalLabel","aria-hidden":"true",style:{overflow:"inherit"}},[(0,i._)("div",Sp,[(0,i._)("div",Pp,[Ep,(0,i._)("div",Mp,[(0,i._)("div",Ap,[(0,i._)("div",Up,[(0,i._)("img",{class:"profile-pic rounded-circle",src:e.groupAvatarCreated?e.groupAvatarCreated:e.groupAvatarDefault,alt:"profile-pic"},null,8,Tp),(0,i._)("div",jp,[Np,(0,i._)("input",{type:"file",id:"new-image",accept:"image/png, image/gif, image/jpeg",ref:"avatar-input",onChange:t[0]||(t[0]=(...e)=>n.updatePicture&&n.updatePicture(...e)),style:{display:"none"}},null,544)])])]),Op,(0,i._)("div",Rp,[zp,(0,i.wy)((0,i._)("input",{type:"text",class:"form-control w-75","onUpdate:modelValue":t[1]||(t[1]=t=>e.newEvent.title=t),placeholder:"Event title"},null,512),[[a.nr,e.newEvent.title]])]),$p,(0,i._)("div",Fp,[Gp,(0,i.wy)((0,i._)("input",{type:"date",class:"form-control w-75","onUpdate:modelValue":t[2]||(t[2]=t=>e.newEvent.date=t),placeholder:"Event date"},null,512),[[a.nr,e.newEvent.date]])]),Bp,(0,i._)("div",Zp,[Wp,(0,i.wy)((0,i._)("textarea",{id:"descriptionTextArea",type:"text",class:"form-control w-75","onUpdate:modelValue":t[3]||(t[3]=t=>e.newEvent.description=t),placeholder:"Event description",style:{resize:"none",height:"60px"}}," ",512),[[a.nr,e.newEvent.description]])])]),(0,i._)("div",Lp,[(0,i._)("button",{type:"button",class:"col-4 btn btn-primary",onClick:t[4]||(t[4]=(...e)=>n.submit&&n.submit(...e))},"Create")])])])],8,qp)}var Hp={name:"NewEventModal",props:{modalId:{type:String,default:""},groupId:{type:String,default:""}},data:()=>({groupAvatarDefault:"http://localhost:4000/images/default_avatar.png",groupAvatarCreated:"",newEvent:{eventAvatar:null,title:"",description:"",date:null}}),methods:{async submit(){if(!this.newEvent.title)return void this.$toast.open({message:"Please fill event title!",type:"error"});if(!this.newEvent.description)return void this.$toast.open({message:"Please fill event description!",type:"error"});this.newEvent.groupId=this.groupId;let e=await ee().post("api/group/newevent",this.newEvent,{withCredentials:!0,headers:{"Content-Type":"multipart/form-data"}});!0===e.data.ok&&(this.$toast.open({message:e.data.message,type:"success"}),this.$socket.send(JSON.stringify({eventName:this.newEvent.title,eventDate:this.newEvent.date,eventId:parseInt(e.data.data),groupId:parseInt(this.groupId),type:"newEvent"})),this.$router.go(this.$router.currentRoute))},updatePicture(e){var t=e.target.files||e.dataTransfer.files;if(!t.length)return;const s=t[0],[a]=s.type.split("/");return"image"!=a?(this.$toast.open({message:"Only images allowed to upload!",type:"error"}),e.target.value=null,this.newEvent.eventAvatar=null,void(this.groupAvatarCreated="")):s.size>2048e3?(this.$toast.open({message:"Image size must be less than 2 MB!",type:"error"}),e.target.value=null,this.newEvent.eventAvatar=null,void(this.groupAvatarCreated="")):(this.newEvent.eventAvatar=s,void(this.groupAvatarCreated=URL.createObjectURL(this.newEvent.eventAvatar)))}},mounted(){const e=document.getElementById("descriptionTextArea"),t=120;e.oninput=function(){e.style.height="",e.style.height=Math.min(e.scrollHeight,t)+"px"}}};const Yp=(0,se.Z)(Hp,[["render",Vp],["__scopeId","data-v-551c6aeb"]]);var Kp=Yp,Jp={name:"GroupEventsFeed",components:{GroupEventOverview:Cp,NewEventModal:Kp},props:{groupId:{type:String,default:""},events:{type:Array}}};const Qp=(0,se.Z)(Jp,[["render",Ou]]);var Xp=Qp;const em={class:"card"},tm=(0,i._)("div",{class:"card-header d-flex justify-content-between"},[(0,i._)("div",{class:"header-title"},[(0,i._)("h4",{class:"card-title"},"About")])],-1),sm={class:"card-body"},am={class:"list-inline p-0 m-0"},im=(0,i._)("h6",null,"Description:",-1),om={class:"mb-0"},lm=(0,i._)("hr",{class:"m-2 mx-0 me-0"},null,-1),nm={class:"d-flex gap-2 align-items-center"},rm=(0,i._)("h6",null,"Status: ",-1),cm={class:"d-flex gap-1 align-items-center"},dm={class:"flex-shrink-0"},um={key:0,class:"ri-lock-fill h4"},pm={class:"flex-grow-1"};function mm(e,t,s,a,o,l){return(0,i.wg)(),(0,i.iD)("div",em,[tm,(0,i._)("div",sm,[(0,i._)("ul",am,[(0,i._)("li",null,[im,(0,i._)("p",om,(0,x.zw)(s.group.description),1)]),lm,(0,i._)("li",null,[(0,i._)("div",nm,[rm,(0,i._)("div",cm,[(0,i._)("div",dm,[s.group.private?((0,i.wg)(),(0,i.iD)("i",um)):(0,i.kq)("",!0)]),(0,i._)("div",pm,[(0,i._)("h6",null,(0,x.zw)(s.group.private?"Private":"Public"),1)])])])])])])])}var gm={name:"GroupAbout",props:{group:{type:Object}}};const hm=(0,se.Z)(gm,[["render",mm]]);var vm=hm;const fm={class:"d-flex align-items-center justify-content-between mb-3 flex-wrap"},wm={class:"group-info d-flex align-items-center"},bm={class:"me-3"},_m=["src"],ym={class:"info"},km={class:"mb-0"},Dm={key:0,class:"ri-lock-fill pe-2"},xm={class:"group-member d-flex align-items-center gap-2 mt-md-0 mt-2"},Cm={key:0,class:"d-flex align-items-center justify-content-between"};function Im(e,t,s,a,o,l){const n=(0,i.up)("SelectionDropDown");return(0,i.wg)(),(0,i.iD)("div",fm,[(0,i._)("div",wm,[(0,i._)("div",bm,[(0,i._)("img",{class:"rounded-circle img-fluid avatar-100",src:s.group.picture,alt:""},null,8,_m)]),(0,i._)("div",ym,[(0,i._)("h4",null,(0,x.zw)(s.group.title),1),(0,i._)("p",km,[s.group.private?((0,i.wg)(),(0,i.iD)("i",Dm)):(0,i.kq)("",!0),(0,i.Uk)((0,x.zw)(s.group.private?"Private Group":"Public Group")+". "+(0,x.zw)(s.group.totalFollowers)+" followers",1)])])]),(0,i._)("div",xm,[s.group.isFollowing?((0,i.wg)(),(0,i.iD)("div",Cm,[(0,i._)("button",{type:"submit",class:"btn btn-primary",style:{"border-top-right-radius":"0","border-bottom-right-radius":"0"},onClick:t[0]||(t[0]=(...e)=>l.sendInvite&&l.sendInvite(...e))},"Invite"),(0,i.Wm)(n,{additionalButton:"",selectionAttr:o.selectionDD},null,8,["selectionAttr"])])):(0,i.kq)("",!0),s.group.isFollowing||s.group.isMyGroup||!s.group.private||s.group.invite?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("button",{key:1,type:"submit",onClick:t[1]||(t[1]=(...e)=>l.request&&l.request(...e)),class:"btn btn-success"},"Request to join")),s.group.isFollowing||s.group.isMyGroup||!s.group.invite?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("button",{key:2,type:"submit",onClick:t[2]||(t[2]=(...e)=>l.acceptInvite&&l.acceptInvite(...e)),class:"btn btn-success"},"Accept Invite")),s.group.isFollowing||s.group.isMyGroup||!s.group.invite?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("button",{key:3,type:"submit",onClick:t[3]||(t[3]=(...e)=>l.declineInvite&&l.declineInvite(...e)),class:"btn btn-danger"},"Decline Invite")),s.group.isFollowing||s.group.isMyGroup||s.group.private||s.group.invite?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("button",{key:4,type:"submit",onClick:t[4]||(t[4]=(...e)=>l.follow&&l.follow(...e)),class:"btn btn-primary"},"Follow")),s.group.isFollowing&&!s.group.isMyGroup?((0,i.wg)(),(0,i.iD)("button",{key:5,type:"submit",onClick:t[5]||(t[5]=(...e)=>l.unfollow&&l.unfollow(...e)),class:"btn btn-warning"},"Unfollow")):(0,i.kq)("",!0)])])}var qm={name:"GroupHeader",props:{group:{type:Object}},data(){return{selectionDD:{label:"",elements:[]}}},async created(){let e=await ee().get("api/followers",{withCredentials:!0});e.data?this.selectionDD.elements=e.data:this.selectionDD.elements=[]},components:{SelectionDropDown:Ss},methods:{...(0,Q.Se)({getUserId:"auth/id"}),...(0,Q.OI)({removeRequestById:"REMOVE_REQUEST_BY_ID"}),async request(){let e=await ee().get("api/group/requesttofollow",{params:{id:this.group.id},withCredentials:!0});this.parseResponse(e),!0===e.data.ok&&this.$socket.send(JSON.stringify({dest:this.group.creatorId,groupName:this.group.title,groupId:this.group.id,type:"groupFollowRequest"}))},async acceptInvite(){let e=await ee().get("api/groupacceptrequest",{params:{id:this.getUserId(),groupId:this.group.id},withCredentials:!0});this.parseResponse(e),!0===e.data.ok&&(this.$emit("invite"),this.$emit("follow"),this.removeRequestById(this.group.id))},async declineInvite(){let e=await ee().get("api/groupdeclinerequest",{params:{id:this.getUserId(),groupId:this.group.id},withCredentials:!0});this.parseResponse(e),!0===e.data.ok&&(this.$emit("invite"),this.removeRequestById(this.group.id))},async follow(){let e=await ee().get("api/group/follow",{params:{id:this.group.id},withCredentials:!0});this.parseResponse(e),!0===e.data.ok&&this.$emit("follow")},async unfollow(){let e=await ee().get("api/group/unfollow",{params:{id:this.group.id},withCredentials:!0});this.parseResponse(e),!0===e.data.ok&&this.$emit("unfollow")},async sendInvite(){let e=this.selectionDD.elements.filter((e=>e.selected));if(0===e.length)return void this.$toast.open({message:"You must select at least one folower!",type:"error"});let t=await ee().post("api/group/sendinvites",{id:this.group.id,invites:JSON.stringify(e)},{withCredentials:!0,headers:{"Content-Type":"multipart/form-data"}});if(this.parseResponse(t),!0===t.data.ok){let e=JSON.parse(t.data.data);null!==e&&e.forEach((e=>{this.$socket.send(JSON.stringify({dest:e.id,groupName:this.group.title,groupId:this.group.id,type:"inviteRequest"}))}));for(let t=0;t<this.selectionDD.elements.length;t++)this.selectionDD.elements[t].selected=!1}},parseResponse(e){!1!==e.data.ok?this.$toast.open({message:e.data.message,type:"success"}):this.$toast.open({message:e.data.message,type:"error"})}}};const Sm=(0,se.Z)(qm,[["render",Im]]);var Pm=Sm,Em={name:"GroupBase",components:{GroupAbout:vm,GroupHeader:Pm,GroupEventsFeed:Xp,CreatePost:Ts,PostContent:za},props:{groupId:{type:String,default:""}},data(){return{group:{},postsToShow:5}},watch:{groupId:{handler(){this.fetchGroupProfile()}}},computed:{showPosts(){return this.group.posts?this.group.posts.slice(0,this.postsToShow):[]},showEvents(){return this.group.events?this.group.events:[]}},async created(){this.fetchGroupProfile()},methods:{async fetchGroupProfile(){let e=await ee().get("api/group",{params:{id:this.groupId},withCredentials:!0});this.group=e.data},follow(){this.group.isFollowing=!0},unfollow(){this.group.isFollowing=!1},invite(){this.group.invite=!1}}};const Mm=(0,se.Z)(Em,[["render",Mu]]);var Am=Mm,Um={name:"GroupBaseView",components:{GroupBase:Am}};const Tm=(0,se.Z)(Um,[["render",vu]]);var jm=Tm;const Nm={class:"text-center"};function Om(e,t,s,a,o,l){return(0,i.wg)(),(0,i.iD)("h1",Nm,"Logging out...")}var Rm={async created(){await this.signOut()},methods:{...(0,Q.nv)({logOut:"auth/signOut"}),async signOut(){await this.logOut(),this.$disconnect(),this.$router.push("/sign-in")}}};const zm=(0,se.Z)(Rm,[["render",Om]]);var $m=zm,Fm=s(8791);function Gm({next:e,store:t}){return t.getters["auth/authenticated"]?e():e({name:"sign-in"})}function Bm({next:e,store:t}){return t.getters["auth/authenticated"]?e({name:"home"}):e()}function Zm(e,t,s){const a=t[s];return a?()=>{const i=Zm(e,t,s+1);a({...e,next:i})}:e.next}const Wm=[{path:"",name:"home",component:Wa,meta:{middleware:[Gm]}},{path:"/logout",name:"logout",component:$m,meta:{middleware:[Gm]}},{path:"/sign-up",name:"sign-up",component:Xi,meta:{middleware:[Bm]}},{path:"/sign-in",name:"sign-in",component:mi,meta:{middleware:[Bm]}},{path:"/user/:userId",name:"user",component:_n,props:!0,meta:{middleware:[Gm]}},{path:"/post/:postId",name:"post",component:ao,props:!0,meta:{middleware:[Gm]}},{path:"/profile-settings",name:"profileSettings",component:Xn,meta:{middleware:[Gm]}},{path:"/privacy-settings",name:"privacySettings",component:wr,meta:{middleware:[Gm]}},{path:"/follow-request",name:"followRequest",component:Ur,meta:{middleware:[Gm]}},{path:"/chat",name:"chat",component:td,meta:{middleware:[Gm]}},{path:"/chat/:chatId",name:"exactChat",component:td,props:!0,meta:{middleware:[Gm]}},{path:"/group/",name:"groupsFeed",component:hu,meta:{middleware:[Gm]}},{path:"/group/:groupId",name:"exactGroup",component:jm,props:!0,meta:{middleware:[Gm]}}],Lm=(0,ht.p7)({history:(0,ht.PO)("/"),routes:Wm});Lm.beforeEach(((e,t,s)=>{if(!e.meta.middleware)return s();const a=e.meta.middleware,i={to:e,from:t,next:s,store:Fm.Z};return a[0]({...i,next:Zm(i,a,1)})}));var Vm=Lm,Hm=s(636),Ym=s.n(Hm),Km=s(6215),Jm=s.n(Km);function Qm(e){const t=e.substring(0,16),[s,a]=t.split("T"),[i,o,l]=s.split("-");return`${l}.${o}.${i} ${a}`}s(6935),ee().defaults.baseURL="http://localhost:4000/";const Xm=(0,a.ri)(gt);Fm.Z.dispatch("auth/authMe",localStorage.getItem("sn_token")).then(function(){Xm.use(Fm.Z).use(Vm).use(Ym(),"ws://localhost:4000/api/socket",{store:Fm.Z,connectManually:!0}).use(Jm()).mount("#app")}.bind(Xm))},6935:function(e,t,s){s.r(t);var a=s(8791);a.Z.subscribe((e=>{switch(e.type){case"auth/SET_TOKEN":e.payload?localStorage.setItem("sn_token",e.payload):localStorage.setItem("sn_token","");break}}))},8791:function(e,t,s){s.d(t,{Z:function(){return r}});var a=s(65),i=s(6265),o=s.n(i),l={namespaced:!0,state:{token:null,user:null},getters:{authenticated(e){return e.token&&e.user},id(e){return e.user.id},user(e){return e.user},avatar(e){return e.user.avatar}},mutations:{SET_TOKEN(e,t){e.token=t},SET_USER(e,t){e.user=t},UPDATE_USER(e,t){e.user[t.type]=t.data}},actions:{async authMe({commit:e,state:t},s){if(s&&e("SET_TOKEN",s),t.token)try{let t=await o().get("api/authme",{withCredentials:!0});e("SET_USER",t.data)}catch(a){e("SET_TOKEN",null),e("SET_USER",null)}},async signOut({commit:e}){await o().get("api/logout"),e("SET_TOKEN",null),e("SET_USER",null)}}},n=s(2599),r=(0,a.MT)({state:{socket:{isConnected:!1,message:"",reconnectError:!1,heartBeatInterval:5e4,heartBeatTimer:0},requests:[],message:null},mutations:{SET_REQUESTS(e,t){e.requests=t},REMOVE_REQUEST(e,t){e.requests.splice(t,1)},REMOVE_REQUEST_BY_ID(e,t){for(let s=0;s<e.requests.length;s++)if(e.requests[s].groupId===t){e.requests.splice(s,1);break}},SOCKET_ONOPEN(e,t){n.l.config.globalProperties.$socket=t.currentTarget,console.log("The line is connected: "+new Date),e.socket.isConnected=!0,e.socket.heartBeatTimer=setInterval((()=>{const t="heart_beat";e.socket.isConnected&&n.l.config.globalProperties.$socket.send(t)}),e.socket.heartBeatInterval),this.dispatch("loadRequests")},SOCKET_ONCLOSE(e,t){e.socket.isConnected=!1,clearInterval(e.socket.heartBeatTimer),e.socket.heartBeatTimer=0,console.log("The line is disconnected: "+new Date),console.log(t)},SOCKET_ONERROR(e,t){console.error(e,t)},SOCKET_ONMESSAGE(e,t){const s=JSON.parse(t.data);switch(s.type){case"followRequest":e.requests.push(s);break;case"groupFollowRequest":e.requests.push(s);break;case"inviteRequest":e.requests.push(s);break;case"newEvent":e.requests.push(s);break;case"newMessage":e.message={chatId:s.chatId,author:s.authorId,authorName:s.author.split(" ")[0],profilePicture:s.avatar,time:new Date(Date.now()).toISOString(),text:s.sub};break}e.socket.message=t},SOCKET_RECONNECT(e,t){console.info("Message system reconnecting...",e,t)},SOCKET_RECONNECT_ERROR(e){e.socket.reconnectError=!0}},getters:{requests(e){return e.requests},message(e){return e.message}},actions:{async loadRequests({commit:e}){try{let t=await o().get("api/requests",{withCredentials:!0});t.data||(t.data=[]),e("SET_REQUESTS",t.data)}catch(t){e("SET_REQUESTS",[])}}},modules:{auth:l}})}},t={};function s(a){var i=t[a];if(void 0!==i)return i.exports;var o=t[a]={exports:{}};return e[a].call(o.exports,o,o.exports,s),o.exports}s.m=e,function(){var e=[];s.O=function(t,a,i,o){if(!a){var l=1/0;for(d=0;d<e.length;d++){a=e[d][0],i=e[d][1],o=e[d][2];for(var n=!0,r=0;r<a.length;r++)(!1&o||l>=o)&&Object.keys(s.O).every((function(e){return s.O[e](a[r])}))?a.splice(r--,1):(n=!1,o<l&&(l=o));if(n){e.splice(d--,1);var c=i();void 0!==c&&(t=c)}}return t}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[a,i,o]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var a in t)s.o(t,a)&&!s.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};s.O.j=function(t){return 0===e[t]};var t=function(t,a){var i,o,l=a[0],n=a[1],r=a[2],c=0;if(l.some((function(t){return 0!==e[t]}))){for(i in n)s.o(n,i)&&(s.m[i]=n[i]);if(r)var d=r(s)}for(t&&t(a);c<l.length;c++)o=l[c],s.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return s.O(d)},a=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=s.O(void 0,[998],(function(){return s(2599)}));a=s.O(a)})();
//# sourceMappingURL=app.3d81008a.js.map